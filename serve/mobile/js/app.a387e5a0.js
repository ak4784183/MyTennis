(function(t){function e(e){for(var a,n,l=e[0],r=e[1],c=e[2],m=0,u=[];m<l.length;m++)n=l[m],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);d&&d(e);while(u.length)u.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,l=1;l<s.length;l++){var r=s[l];0!==i[r]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},i={app:0},o=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=r;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0061":function(t,e,s){},"0770":function(t,e,s){},"08f4":function(t,e,s){"use strict";var a=s("3f47"),i=s.n(a);i.a},"09df":function(t,e,s){"use strict";var a=s("8659"),i=s.n(a);i.a},"0a86":function(t,e,s){},"0aba":function(t,e,s){},1:function(t,e){},"161b":function(t,e,s){},"1c2f":function(t,e,s){},2067:function(t,e,s){},"20d7":function(t,e,s){"use strict";var a=s("0770"),i=s.n(a);i.a},"288d":function(t,e,s){},"392d":function(t,e,s){"use strict";var a=s("0aba"),i=s.n(a);i.a},"3d39":function(t,e,s){},"3f47":function(t,e,s){},4168:function(t,e,s){"use strict";var a=s("a1d0"),i=s.n(a);i.a},4303:function(t,e,s){},"448b":function(t,e,s){"use strict";var a=s("66c4"),i=s.n(a);i.a},"45e6":function(t,e,s){"use strict";var a=s("9b12"),i=s.n(a);i.a},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=o(t);return s(e)}function o(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=o,t.exports=i,i.id="4678"},"47c1":function(t,e,s){"use strict";var a=s("faaa"),i=s.n(a);i.a},"4caf":function(t,e,s){},5452:function(t,e,s){"use strict";var a=s("af35"),i=s.n(a);i.a},"54c1":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},o=[],n=s("2877"),l={},r=Object(n["a"])(l,i,o,!1,null,null,null),c=r.exports,d=s("8c4f"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-page"},[s("div",{staticClass:"login-bg"}),s("div",{staticClass:"login-main d-flex flex-coloum ai-center jc-start p-6"},[s("div",{staticClass:"login-btn  mt-6 text-white fs-xxl d-flex ai-center jc-center",class:!0===t.logoState?"bg-tomato":"bg-blue"},[s("i",{staticClass:"iconfont ",class:!0===t.logoState?"icon-icon-test":"icon-wangqiu1"})]),s("form",{staticClass:"h100",attrs:{method:"post"}},[s("div",{staticClass:"w-100 h40 input-item "},[s("i",{staticClass:"iconfont icon-yonghu mr-3 ml-2"}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.model.username,expression:"model.username",modifiers:{trim:!0}}],staticStyle:{color:"#fff"},attrs:{type:"text",placeholder:"Username"},domProps:{value:t.model.username},on:{input:function(e){e.target.composing||t.$set(t.model,"username",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"w-100 h40 input-item mt-5"},[s("i",{staticClass:"iconfont icon-mima mr-3 ml-2"}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.model.password,expression:"model.password",modifiers:{trim:!0}}],staticStyle:{color:"#fff"},attrs:{type:"password",placeholder:"Password"},domProps:{value:t.model.password},on:{input:function(e){e.target.composing||t.$set(t.model,"password",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("mt-button",{staticClass:"bg-blue mt-5 text-white",attrs:{size:"large"},on:{click:function(e){return t.routeByName("register")}}},[s("i",{staticClass:"iconfont icon-zhuce fs-xxl mr-1"}),t._v("注册")]),s("mt-button",{staticClass:"bg-tomato mt-5 text-white",attrs:{size:"large"},on:{click:t.login}},[s("i",{staticClass:"iconfont icon-icon-test fs-xxl mr-1"}),t._v("登录")])],1)])},u=[],h=s("76a0"),f=s.n(h),p=s("2f62"),v={data(){return{model:{username:"",password:""},isLogin:!1}},computed:{logoState(){return""!=this.model.username&&""!=this.model.password}},methods:{async login(){const{username:t,password:e}=this.model;if(""!==t&&""!==e){const t=await this.post("login",this.model);if(t){const{name:e,id:s,m_token:a}=t;localStorage.setItem("m_token",a||""),this.setItem({key:"m_userInfo",value:{name:e,id:s}}),this.AlertSuccess(`欢迎${e}登录`),setTimeout(()=>{this.routeByName("article")},1500)}}else this.AlertError("账户名或密码不能为空")},...Object(p["c"])(["setItem"])}},g=v,_=(s("905c"),Object(n["a"])(g,m,u,!1,null,null,null)),x=_.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"register-page"},[s("mt-header",{staticClass:"bg-dark",attrs:{title:"注册"}},[s("router-link",{attrs:{slot:"left",to:"/login"},slot:"left"},[s("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1),s("mt-button",{attrs:{slot:"right",icon:"more"},on:{click:function(e){t.popupVisible=!0}},slot:"right"})],1),s("form",{staticClass:"bb",attrs:{method:"post"}},[s("mt-field",{attrs:{label:"账户名",placeholder:"带有英文和数字的账户名",state:t.fieldState[t.fieldItems.username]},model:{value:t.model.username,callback:function(e){t.$set(t.model,"username","string"===typeof e?e.trim():e)},expression:"model.username"}}),s("mt-field",{attrs:{label:"密码",placeholder:"6-20位带有英文和数字的密码",type:"password",state:t.fieldState[t.fieldItems.password]},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password","string"===typeof e?e.trim():e)},expression:"model.password"}}),s("mt-field",{attrs:{label:"昵称",placeholder:"不超过10位的昵称",state:t.fieldState[t.fieldItems.nickname]},model:{value:t.model.nickname,callback:function(e){t.$set(t.model,"nickname","string"===typeof e?e.trim():e)},expression:"model.nickname"}}),s("mt-field",{attrs:{label:"邮箱",placeholder:"请输入邮箱",type:"email",state:t.fieldState[t.fieldItems.email]},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email","string"===typeof e?e.trim():e)},expression:"model.email"}}),s("mt-field",{attrs:{label:"手机号",placeholder:"请输入手机号",type:"tel",state:t.fieldState[t.fieldItems.tel]},model:{value:t.model.tel,callback:function(e){t.$set(t.model,"tel","string"===typeof e?e.trim():e)},expression:"model.tel"}})],1),s("div",{staticClass:"p-6"},[s("mt-button",{staticClass:"mt-2 text-white",class:!1===t.submitState?"bg-blue":"bg-tomato",attrs:{size:"large",disabled:t.submitState},on:{click:function(e){return e.preventDefault(),t.regSubmit(e)}}},[s("i",{staticClass:"iconfont  fs-xxl mr-1",class:!1===t.submitState?"icon-zhuce":"icon-hold__easyico"}),t._v("注册")])],1),s("mt-popup",{staticClass:"bg-steel",staticStyle:{"border-radius":"0.5rem"},attrs:{"popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[s("div",{staticClass:"text-white p-2"},[t._v(" 此项目由李林衡开发 ")])])],1)},w=[],C={data(){return{popupVisible:!1,fieldItems:{username:2,password:2,nickname:2,email:2,tel:2},fieldState:["success","error","warning"],model:{username:"",password:"",nickname:"",email:"",tel:""}}},computed:{username(){return this.model.username},password(){return this.model.password},nickname(){return this.model.nickname},email(){return this.model.email},tel(){return this.model.tel},submitState(){let t=!1;const e=this.fieldItems;for(let s in e)0!==e[s]&&(t=!0);return t}},watch:{username(){!0===/^[a-zA-Z0-9_-]{4,16}$/.test(this.username)?this.fieldItems.username=0:""===this.username?this.fieldItems.username=2:this.fieldItems.username=1},password(){""===this.password?this.fieldItems.password=2:!0===/^(\w){6,20}$/.test(this.password)?this.fieldItems.password=0:this.fieldItems.password=1},nickname(){this.nickname.length>10&&(this.fieldItems.nickname=1),""===this.nickname&&(this.fieldItems.nickname=2),""!==this.nickname&&this.nickname.length<10&&(this.fieldItems.nickname=0)},email(){let t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;""===this.email?this.fieldItems.email=2:!0===t.test(this.email)?this.fieldItems.email=0:this.fieldItems.email=1},tel(){let t=/^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$/;""===this.tel?this.fieldItems.tel=2:!0===t.test(this.tel)?this.fieldItems.tel=0:this.fieldItems.tel=1}},methods:{async regSubmit(){if(!1===this.$store.state.preventClick){const t=await this.$http.post("register",this.model);let{code:e,message:s}=t.data;if(1===e)return void Object(h["Toast"])({message:s,iconClass:"iconfont icon-cuowu"});Object(h["Toast"])({message:s,iconClass:"iconfont icon-xiaoxi-chenggong",duration:1500}),setTimeout(()=>{this.$router.push("/login")},1500)}}}},y=C,k=Object(n["a"])(y,b,w,!1,null,null,null),j=k.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-page d-flex flex-coloum"},[s("div",{staticClass:"main-body d-flex flex-coloum"},[s("router-view")],1),s("Tabbar")],1)},I=[],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tabbar d-flex jc-around bt"},t._l(t.tabbar,(function(e,a){return s("div",{key:a,staticClass:"d-flex flex-coloum jc-around ai-center p-1",class:t.$store.state.tabbarIndex===a?"text-blue-1":"text-dark",on:{click:function(s){return t.tabbarClick(e["route_name"],a)}}},[s("i",{staticClass:"iconfont fs-lx",class:e.icon}),s("span",{staticClass:"fs-s lh-m"},[t._v(t._s(e.title))])])})),0)},S=[],$={data(){return{tabbar:[{title:"首页",icon:"icon-shouye",route_name:"article"},{title:"视频",icon:"icon-shipin-tianchong",route_name:"video"},{title:"装备",icon:"icon-wangqiu1",route_name:"equip"},{title:"论坛",icon:"icon-luntanxuanze",route_name:"forum"},{title:"我的",icon:"icon-yonghu",route_name:"personal"}],select:0}},computed:{...Object(p["d"])({tabbarIndex:t=>t.tabbarIndex})},watch:{tabbarIndex(){this.routeByName(this.tabbar[this.tabbarIndex]["route_name"])}},methods:{tabbarClick(t,e){this.$store.state.tabbarIndex=e}}},A=$,O=(s("6c5a"),Object(n["a"])(A,P,S,!1,null,null,null)),T=O.exports,B={components:{Tabbar:T}},D=B,L=(s("6c8f"),Object(n["a"])(D,M,I,!1,null,null,null)),E=L.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"article-page"},[s("div",{staticClass:"navbar w-100 h40 bg-dark d-flex jc-start ai-center"},t._l(t.navlist,(function(e,a){return s("div",{key:a,staticClass:"ml-3 fs-xl",on:{click:function(e){return t.swiperSlide(a)}}},[s("span",{staticClass:"item letter-s1",class:t.selected===a?"active fw":"text-l-grey "},[t._v(t._s(e))])])})),0),t.categories.length>0?s("swiper",{ref:"articleSwiper",staticClass:"bg-white",attrs:{options:{autoHeight:!0}},on:{"slide-change":function(){return t.selected=t.$refs.articleSwiper.swiper.realIndex}}},[s("swiper-slide",[0!=t.swipers.length?s("div",{staticClass:"swiper"},[s("mt-swipe",{attrs:{auto:6e3}},t._l(t.swipers,(function(e,a){return s("mt-swipe-item",{key:a},[s("img",{staticClass:"swiper-img",attrs:{src:e.url},on:{click:function(s){return t.linkToAd(e)}}}),s("p",{staticClass:"swiper-text text-white fs-l"},[t._v(t._s(e.title))])])})),1)],1):t._e(),t._l(t.categories,(function(e,a){return s("div",{key:a,staticClass:"card"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:e.articles.length>0,expression:"item.articles.length > 0"}],staticClass:"fs-m p-2 d-flex jc-between ai-center",attrs:{to:{name:"ArticleType",params:{id:e["_id"]}},tag:"div"}},[s("span",{staticClass:"pl-1 fw fs-l",staticStyle:{"border-left":"2px solid tomato"}},[t._v(t._s(e.title))]),s("span",{staticClass:"fs-1 text-dark-6"},[t._v(" 更多 "),s("i",{staticClass:"iconfont icon-icon-arrow-right2"})])]),s("ArtItem",{attrs:{list:e.articles,catTitle:e.title}})],1)}))],2),s("swiper-slide",[s("div",{staticClass:"bg-grey-1 px-2 py-2 fs-l fw d-flex jc-between letter-s1"},[s("div",[s("span",{staticClass:"text-tomato"},[t._v(" "+t._s(t.matchPage.match?t.matchPage.match.title:"不限定赛事类型")+" ")])]),s("div",{staticClass:"text-steel",on:{click:function(e){t.matchPage.showMatchList=!0}}},[t._v(" 选择 "),s("i",{staticClass:"ml-1 iconfont icon-gengduo"})])]),t.matchPage.list.length>0?s("MyLoadMore",{attrs:{loading:t.matchPage.loading,noMore:t.matchPage.noMore},on:{loadMore:function(e){return t.loadMore(t.matchPage,t.fetchMatch,t.matchPage.list,t.selected,1)}}},t._l(t.matchPage.list,(function(e){return s("li",{key:e["_id"],on:{click:function(s){return t.watchVideo(e)}}},[s("div",{staticClass:"bg-grey-1 fs-l p-2 d-flex jc-between fw"},[s("span",[t._v(t._s(t._f("formatMDcn")(e.date))+" 星期"+t._s(t._f("formatWK")(e.date)))]),s("span",[t._v(t._s(t._f("formatYear")(e.date))+"年"+t._s(e.match.title))])]),s("div",{staticClass:"d-flex p-2"},[s("div",{staticClass:"d-flex flex-coloum jc-center ai-center"},[s("span",{staticClass:"fs-l text-black"},[t._v(t._s(t._f("formatDM")(e.date)))]),e.round?s("span",{staticClass:"fs-m text-dark-6"},[t._v("第"+t._s(e.round)+"轮")]):t._e()]),s("div",{staticClass:"flex-1 d-flex fs-sm fw text-dark px-1"},[s("div",{staticClass:"flex-1 d-flex flex-coloum ai-center jc-center"},t._l(e.host,(function(e){return s("p",{key:e["_id"],staticClass:"text-center"},[t._v(t._s(e.cname))])})),0),s("div",{staticClass:"d-flex ai-center text-orange"},[t._v("VS")]),s("div",{staticClass:"flex-1 d-flex flex-coloum ai-center jc-center"},t._l(e.guest,(function(e){return s("p",{key:e["_id"],staticClass:"text-center"},[t._v(t._s(e.cname))])})),0)]),s("div",{staticClass:"d-flex flex-coloum ai-end"},[s("span",{class:e.hostscore>e.guestscore?"text-tomato":"text-dark-6"},[t._v(" "+t._s(e.hostscore)+" "),s("i",{staticClass:"iconfont icon-zuobian-tianchong",class:e.guestscore<e.hostscore?"text-tomato":"text-white"})]),s("span",{class:e.guestscore>e.hostscore?"text-tomato":"text-dark-6"},[t._v(" "+t._s(e.guestscore)+" "),s("i",{staticClass:"iconfont icon-zuobian-tianchong",class:e.guestscore>e.hostscore?"text-tomato":"text-white"})]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.video,expression:"item.video"}]},[s("i",{staticClass:"iconfont icon-bofang text-dark fs-m"}),s("span",{staticClass:"fs-m text-dark ml-1"},[t._v("集锦")])])])])])})),0):s("MyBlankPage")],1),s("swiper-slide",[s("div",{staticClass:"d-flex bb-l letter-s1"},t._l(t.dataPage.sortlist,(function(e,a){return s("div",{key:a,staticClass:"flex-1 d-flex jc-around",on:{click:function(e){t.dataPage.selected=a}}},[s("span",{staticClass:"text-dark my-2 b-radius10 px-2",class:t.dataPage.selected==a?"bg-blue text-white":""},[t._v(t._s(e.title))])])})),0),s("div",[s("div",{staticClass:"bb-l letter-s1 py-1 px-3 d-flex jc-between fs-m text-dark-6"},[s("span",[t._v("ATP球员")]),s("span",[t._v(t._s(0===t.dataPageSelected?"积分":"大满贯"))])]),s("ul",t._l(t.dataPage.ATP,(function(e,a){return s("li",{key:a,staticClass:"py-2 pl-4 pr-3 d-flex ai-center bb-l",on:{click:function(s){return t.routeByName("player",e["_id"])}}},[s("span",{class:[0===a?"text-tomato":"",1===a?"text-blue":"",2===a?"text-green":""]},[t._v(t._s(a+1))]),s("div",{staticClass:"flex-1 text-dark d-flex ai-center"},[s("img",{staticClass:"w40 h40 mx-3 b-radius50",attrs:{src:e.avatar?e.avatar:t.defaultHeader}}),s("span",{staticClass:"letter-s1 fs-l"},[t._v(t._s(e.cname))])]),s("span",{staticClass:"fs-l",class:[0===a?"text-tomato fw":"",1===a?"text-blue fw":"",2===a?"text-green fw":""]},[t._v(" "+t._s(0===t.dataPageSelected?e.integral:e.grandslam)+" ")])])})),0),s("div",{staticClass:"bb-l letter-s1 py-1 px-3 d-flex jc-between fs-m text-dark-6"},[s("span",[t._v("WTA球员")]),s("span",[t._v(t._s(0===t.dataPageSelected?"积分":"大满贯"))])]),s("ul",t._l(t.dataPage.WTA,(function(e,a){return s("li",{key:a,staticClass:"py-2 pl-4 pr-3 d-flex ai-center bb-l",on:{click:function(s){return t.routeByName("player",e["_id"])}}},[s("span",{class:[0===a?"text-tomato fw":"",1===a?"text-blue fw":"",2===a?"text-green fw":""]},[t._v(t._s(a+1))]),s("div",{staticClass:"flex-1 text-dark d-flex ai-center"},[s("img",{staticClass:"w40 h40 mx-3 b-radius50",attrs:{src:e.avatar?e.avatar:t.defaultHeader}}),s("span",{staticClass:"letter-s1 fs-l"},[t._v(t._s(e.cname))])]),s("span",{staticClass:"fs-l",class:[0===a?"text-tomato fw":"",1===a?"text-blue fw":"",2===a?"text-green fw":""]},[t._v(" "+t._s(0===t.dataPageSelected?e.integral:e.grandslam)+" ")])])})),0)])]),s("swiper-slide",[s("MySearch",{attrs:{search:t.playerPage.search},on:{inputSearch:t.searchPlayer}}),t.playerPage.list.length>0?s("MyLoadMore",{attrs:{flexWrap:!0,loading:t.playerPage.loading,noMore:t.playerPage.noMore},on:{loadMore:function(e){return t.loadMore(t.playerPage,t.fetchPlayer,t.playerPage.list,t.selected,3)}}},t._l(t.playerPage.list,(function(e){return s("li",{key:e["_id"],staticClass:"w-50 p-2",on:{click:function(s){return t.routeByName("player",e["_id"])}}},[s("div",{staticClass:"px-2"},[s("img",{staticClass:"w-100 h100",attrs:{src:e.avatar?e.avatar:t.default_img}}),s("p",{staticClass:"text-over fs-l fw text-center"},[t._v(t._s(e.cname))])])])})),0):s("MyBlankPage")],1)],1):t._e(),s("mt-popup",{staticStyle:{height:"100vh",width:"70vw"},attrs:{position:"right"},model:{value:t.matchPage.showMatchList,callback:function(e){t.$set(t.matchPage,"showMatchList",e)},expression:"matchPage.showMatchList"}},[s("div",{staticClass:"d-flex px-3 flex-coloum",staticStyle:{overflow:"scroll"}},[s("p",{staticClass:"fw my-3"},[t._v("赛事名称")]),t._l(t.matchPage.matches,(function(e){return s("div",{key:e["_id"],staticClass:"bborder b-radius5 mb-2 p-2 fs-l text-center",class:t.matchPage.match==e?"bg-orange text-white":"text-dark",on:{click:function(s){return t.selectMatch(e)}}},[t._v(t._s(e.title))])}))],2)])],1)},U=[],z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{staticClass:"w-100 p-2"},[s("div",{staticClass:"bg-grey-1 b-radius10 h30 px-2 d-flex ai-center jc-between"},[s("i",{staticClass:"iconfont icon-fangdajing fs-xl ml-1"}),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search,expression:"search",modifiers:{trim:!0}}],staticClass:"ml-1 flex-1 letter-s1",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("span",{staticClass:"letter-s1 fs-m w40 text-center",class:""==t.search?"text-blue":"text-tomato",on:{click:function(){""!=t.search&&(t.search="")}}},[t._v(t._s(""==t.search?"搜索":"取消")+" ")])])])])},H=[],R={data(){return{search:""}},watch:{async search(){await this.inputSearch()}},methods:{async inputSearch(){await this.$emit("inputSearch",this.search)}}},V=R,q=Object(n["a"])(V,z,H,!1,null,null,null),F=q.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",t._l(t.list,(function(e){return s("li",{key:e["_id"],on:{click:function(s){return t.routeByName("articleDetail",e["_id"])}}},[s("div",{staticClass:"w-100 bb p-2 d-flex jc-between",staticStyle:{height:"8rem"}},[s("div",{staticClass:"flex-1 d-flex flex-coloum jc-between mr-2 pb-1"},[s("p",{staticClass:"fs-m"},[t.catTitle?s("strong",{staticClass:"text-tomato"},[t._v("["+t._s(t.catTitle)+"]")]):t._e(),t._v(" "+t._s(e.title)+" ")]),s("div",{staticClass:"d-flex jc-start ai-center text-dark-6"},[e.commends?s("span",{staticClass:"fs-m d-flex ai-center mr-2"},[s("i",{staticClass:"iconfont icon-liaotian mr-1 fs-m"}),t._v(" "+t._s(e.commends.length)+" ")]):t._e(),s("span",{staticClass:"fs-m px-2 d-flex ai-center mr-1"},[s("i",{staticClass:"iconfont icon-shijian mr-1 fs-m"}),t._v(" "+t._s(t._f("timeAgo")(e.createdAt))+" ")]),s("span",{staticClass:"fs-m px-2 d-flex ai-center"},[s("i",{staticClass:"iconfont icon-ai-eye mr-2 fs-x"}),t._v(t._s(e.reads?e.reads:"0"))])])]),s("img",{staticClass:"my-2 w-40",attrs:{src:e.cover?e.cover:t.default_img}})])])})),0)},Y=[],J={props:{catTitle:{type:String},list:{type:Array,default:()=>[]}}},Z=J,Q=Object(n["a"])(Z,W,Y,!1,null,null,null),G=Q.exports,K={components:{MySearch:F,ArtItem:G},data(){return{selected:0,categories:[],swipers:[],navlist:["推荐","赛事","数据","球员"],dataPage:{selected:0,ATP:[],WTA:[],sortlist:[{title:"积分排名",sortname:"integral"},{title:"大满贯",sortname:"grandslam"}]},matchPage:{showMatchList:!1,limit:10,page:0,list:[],matches:[],match:null,loading:!1,noMore:!1},playerPage:{search:"",list:[],limit:10,page:0,loading:!1,noMore:!1}}},computed:{dataPageSelected(){return this.dataPage.selected}},watch:{dataPageSelected(){this.fetchRank()}},async created(){this.fetchSwipers(),this.fetchCategories(),this.fetchRank(),this.initMatchPage(),this.initPlayerPage()},methods:{async initMatchPage(){this.matchPage.page=0,this.matchPage.noMore=!1,this.matchPage.matches=await this.fetchMatchStyle(),this.matchPage.list=await this.fetchMatch()},async initPlayerPage(){this.playerPage.page=0,this.playerPage.noMore=!1,this.playerPage.list=await this.fetchPlayer()},async fetchCategories(){this.categories=await this.fetch("categories/all")},async fetchSwipers(){this.swipers=await this.fetch("rest/ads")},swiperSlide(t){this.$refs.articleSwiper.swiper.slideTo(t)},async fetchMatchStyle(){return await this.fetch("rest/matches",{sort:{title:-1}})},async fetchMatch(){const t=this.matchPage,e={limit:t.limit,page:t.page,sort:{date:-1},populate:{path:"host guest match"}};return this.matchPage.match&&(e.where={match:this.matchPage.match["_id"]}),await this.fetch("rest/contest",e)},async fetchRank(){const t=this.dataPage,e={};e[t.sortlist[t.selected].sortname]=-1;const s={where:{gender:!0},limit:20,page:0,sort:e},a={where:{gender:!1},limit:20,page:0,sort:e};0===this.dataPageSelected&&(s.where.retire=!1,a.where.retire=!1),this.dataPage.ATP=await this.fetch("rest/players",s),this.dataPage.WTA=await this.fetch("rest/players",a)},async fetchPlayer(t){return await this.fetch("rest/players",{match:{key:"cname",val:t},limit:this.playerPage.limit,page:this.playerPage.page})},async selectMatch(t){this.matchPage.match&&this.matchPage.match["_id"]==t["_id"]?this.matchPage.match=null:this.matchPage.match=t,this.matchPage.showMatchList=!1,this.matchPage.noMore=!1,this.matchPage.page=0,this.matchPage.list=await this.fetchMatch()},async searchPlayer(t=""){this.playerPage.list=await this.fetchPlayer(t)},linkToAd(t){t.link&&(window.location.href=t.link)},watchVideo(t){t.video&&this.routeByName("videoDetail",t.video)}}},X=K,tt=(s("8dd5"),Object(n["a"])(X,N,U,!1,null,null,null)),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"articleDetail-page vw100 d-flex flex-coloum jc-start",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[t.article.category?s("SwiperHeader",{attrs:{title:t.article.category.title,itemList:["正文","评论"+(t.article.commends.length?t.article.commends.length:"")],swiperIndex:t.active},on:{swiperClick:function(e){return t.active=e}}},[s("i",{staticClass:"iconfont icon-star fs-xxl",class:t.collections.length>0?"text-orange":"text-white",on:{click:t.articleCollet}})]):t._e(),t.article.content?s("div",{staticClass:"articleDetail-main flex-1"},[s("swiper",{ref:"articleDetailSwiper",staticClass:"w-100",attrs:{options:{autoHeight:!0}},on:{"slide-change":function(e){t.active=t.$refs.articleDetailSwiper.swiper.realIndex}}},[s("swiper-slide",[s("div",{staticClass:"w-100 p-2 article-text flex-1"},[s("p",{staticClass:"fs-xxl fw"},[t._v(" "+t._s(t.article.title)+" ")]),s("div",{staticClass:"text-dark-6 fs-m mt-2 "},[s("span",{staticClass:"mr-3"},[t._v(" 作者："+t._s(t.article.author)+" ")]),s("span",{staticClass:"mr-3"},[t._v("时间："+t._s(t._f("formatDay")(t.article.createdAt)))]),s("span",[t._v("阅读量："+t._s(t.article.reads))])]),s("div",{staticClass:"w-100 mt-5",staticStyle:{overflow:"hidden"},domProps:{innerHTML:t._s(t.article.content)}})])]),s("swiper-slide",[t.commends.length>0?s("ul",{staticClass:"articleDetail-commends w-100 d-flex flex-coloum jc-start"},t._l(t.commends,(function(e,a){return s("li",{key:a,staticClass:"item bg-white w-100 d-flex flex-coloum jc-start p-3 bb",on:{click:function(s){return t.routeByName("ArtcleCommend",e["_id"])}}},[s("div",{staticClass:"item-heade d-flex ai-center"},[s("img",{staticClass:"w40 h40 b-radius-50",attrs:{src:e.from.avatar?e.from.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 flex-coloum jc-start ai-start px-3"},[s("p",{staticClass:"fs-l text-black"},[t._v(" "+t._s(e.from.nickname)+" ")]),s("span",{staticClass:"fs-m text-dark-6"},[t._v(" "+t._s(t._f("timeAgo")(e.createdAt))+" ")])]),e.fabulous?s("div",{staticClass:"d-flex flex-coloum jc-start",class:t._f("IsFabulous")(e.fabulous),on:{click:function(s){return s.stopPropagation(),t.thumbsUp(e["_id"],a)}}},[s("div",[s("i",{staticClass:"iconfont icon-dianzan fs-xxl"})]),e.fabulous?s("span",{staticClass:"fs-m text-center"},[t._v(t._s(e.fabulous.length>0?e.fabulous.length:"赞"))]):t._e()]):t._e()]),s("div",{staticClass:"item-body mt-2"},[s("p",{staticClass:"fs-l "},[t._v(" "+t._s(e.content)+" ")])]),e.childs.length>0?s("div",{staticClass:"item-more bg-grey-1 p-2 mt-1 text-dark"},[t._l(e.childs.slice(0,2),(function(e){return s("p",{key:e["_id"],staticClass:"fs-m"},[e.from?s("span",{staticClass:"text-dark-6"},[t._v(t._s(e.from.nickname)+t._s(e.reply?" 回复 "+e.reply.nickname:"")+" ：")]):t._e(),t._v(" "+t._s(e.content)+" ")])})),e.childs.length>1?s("p",{staticClass:"fs-m letter-s1 text-dark-6"},[t._v(" 查看全部"+t._s(e.childs.length)+"条回复 ")]):t._e()],2):t._e()])})),0):s("MyBlankPage"),t.loading?s("div",{staticClass:"loading-box d-flex jc-center ai-center py-3"},[s("mt-spinner",{staticClass:"mr-3",attrs:{type:"snake"}}),s("span",{staticClass:"text-dark fw"},[t._v("加载中...")])],1):t._e(),t.noMore?s("div",{staticClass:"no-more d-flex jc-center ai-center py-3"},[s("span",{staticClass:"text-dark fw"},[t._v("已加载全部~")])]):t._e()],1)],1)],1):t._e(),s("ArticleReply",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],attrs:{placeholder:"评论一下"},on:{submit:t.submitCommend}})],1)},at=[],it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"articleDetail-myComment d-flex flex-coloum"},[s("form",{staticClass:"flex-1",attrs:{method:"post"}},[s("mt-field",{staticClass:"h-100",attrs:{placeholder:t.placeholder,type:"textarea",rows:"2"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),s("button",{staticClass:"w-100 h40 fs-xl letter-s1 fw text-white submit",class:t.isValid?"bg-grey":"bg-dark ",attrs:{disabled:t.isValid},on:{click:t.submit}},[t._v(" 评论 ")])])},ot=[],nt={props:{placeholder:{type:String}},computed:{isValid(){return""===this.content}},data(){return{content:"",reply:null}},methods:{async submit(){await this.$emit("submit",this.content),this.content=""}}},lt=nt,rt=(s("d93d"),Object(n["a"])(lt,it,ot,!1,null,null,null)),ct=rt.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-wrap w-100 h100 bg-dark text-white d-flex flex-coloum"},[s("div",{staticClass:"flex-1 d-flex jc-between ai-center px-2 "},[s("i",{staticClass:"iconfont icon-fanhui fs-xxl",on:{click:function(e){return t.$router.back()}}}),s("span",{staticClass:"fs-xl letter-s1"},[t._v(t._s(t.title))]),s("span",[t._t("default")],2)]),s("div",{staticClass:"navbar w-100 h50 d-flex text-grey fs-l px-5 letter-s1"},t._l(t.itemList,(function(e,a){return s("div",{key:e,staticClass:"flex-1 d-flex jc-around ai-center",on:{click:function(e){return t.swiperClick(a)}}},[s("span",{staticClass:"child pb-1",class:t.swiperIndex===a?"active-white":"other-white"},[t._v(" "+t._s(e)+" ")])])})),0)])},mt=[],ut={props:{title:{type:String,requrie:!0},itemList:{type:Array,default:()=>[]},swiperIndex:{type:Number,requrie:!0}},methods:{swiperClick(t){this.$emit("swiperClick",t)}}},ht=ut,ft=(s("ae5d"),Object(n["a"])(ht,dt,mt,!1,null,null,null)),pt=ft.exports,vt={props:{id:{}},components:{ArticleReply:ct,SwiperHeader:pt},data(){return{active:0,article:{},content:"",isSubmit:!1,commends:[],limit:5,page:0,isMoreLoading:!1,loading:!1,noMore:!1,collections:[]}},watch:{active(){this.$refs.articleDetailSwiper.swiper.slideTo(this.active)}},computed:{isValid(){return""===this.content},...Object(p["b"])(["getUserId"])},async created(){this.init()},methods:{async init(){this.page=0,this.article=await this.fetch(`/articles/${this.id}`),this.commends=await this.fetchCommends(),this.fetchColletions()},async fetchArticle(){const t=await this.fetch(`/articles/${this.id}`,{limit:this.limit,page:this.page});return t},async fetchCommends(){return await this.fetch(`/articles/commends/${this.id}`,{limit:this.limit,page:this.page})},swiperSlide(t){this.active=t,this.$refs.articleDetailSwiper.swiper.slideTo(t)},async submitCommend(t){if(!this.isSubmit){this.isSubmit=!0;const e=JSON.parse(localStorage.getItem("m_userInfo")).id,s={article:this.id,content:t,from:e};await this.post("art_commend",s);this.isSubmit=!1,this.IndicatorOpen("正在评论"),this.noMore=!1,this.commends.length=0,setTimeout(()=>{this.IndicatorClose(),this.init(),this.AlertSuccess("评价完成")},1500)}},async loadMore(){if(1==this.noMore)return;this.loading=!0,this.page+=1;const t=await this.fetchCommends();setTimeout(()=>{if(t.length>0){for(let e=0;e<t.length;e++)this.commends.push(t[e]);this.isMoreLoading=!this.isMoreLoading,this.loading=!1}else this.loading=!1,this.isMoreLoading=!this.isMoreLoading,this.noMore=!0},1500)},async articleCollet(){if(this.article&&this.getUserId){const t={article:this.article["_id"],user:this.getUserId},e=await this.post("/art_colletion",t);this.AlertSuccess(e.message),this.fetchColletions()}},async fetchColletions(){if(this.article&&this.getUserId){const t={article:this.article["_id"],user:this.getUserId};this.collections=await this.fetch("/rest/art_collection/find",t)}},async thumbsUp(t,e){if(t&&"number"===typeof e){await this.setFabulous(t,"art_fabulous");let s=await this.fetch(`rest/art_commend/${t}`,{populate:{path:"from fabulous"}});this.$set(this.commends[e],"fabulous",s.fabulous)}}}},gt=vt,_t=(s("ecee"),Object(n["a"])(gt,st,at,!1,null,null,null)),xt=_t.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"articleCommend-page"},[s("MyHeader",{attrs:{title:"评论"}}),s("div",{staticClass:"main pt-2"},[s("MyLoadMore",{attrs:{loading:t.loading,noMore:t.noMore},on:{loadMore:t.loadMore}},[s("li",{staticClass:"item bg-white w-100 d-flex flex-coloum jc-start p-3 bb",on:{click:t.removeReply}},[t.model?s("div",{staticClass:"item-heade d-flex ai-center"},[t.model.from?s("img",{staticClass:"w40 h40 b-radius-50",attrs:{src:t.model.from.avatar?t.model.from.avatar:t.defaultHeader}}):t._e(),s("div",{staticClass:"flex-1 flex-coloum jc-start ai-start px-3"},[t.model.from?s("p",{staticClass:"fs-l text-black"},[t._v(" "+t._s(t.model.from.nickname)+" ")]):t._e(),s("span",{staticClass:"fs-m text-dark-6"},[t._v(" "+t._s(t._f("timeAgo")(t.model.createdAt))+" ")])]),t.model.fabulous?s("div",{staticClass:"d-flex flex-coloum jc-start",class:t._f("IsFabulous")(t.model.fabulous)},[s("div",{on:{click:function(e){return t.thumbsUp(t.model["_id"])}}},[s("i",{staticClass:"iconfont icon-dianzan fs-xxl"})]),t.model.fabulous?s("span",{staticClass:"fs-m text-center"},[t._v(t._s(t.model.fabulous.length>0?t.model.fabulous.length:"赞"))]):t._e()]):t._e()]):t._e(),s("div",{staticClass:"item-body mt-2"},[s("p",{staticClass:"fs-l "},[t._v(" "+t._s(t.model.content)+" ")])])]),t._l(t.childs,(function(e,a){return s("li",{key:a,staticClass:"item bg-grey-1 w-100 d-flex flex-coloum jc-start p-3 bb",on:{click:function(s){return t.replyTo(e.from)}}},[s("div",{staticClass:"item-heade d-flex ai-center"},[s("img",{staticClass:"w40 h40 b-radius-50",attrs:{src:e.from.avatar?e.from.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 flex-coloum jc-start ai-start px-3"},[e.from?s("p",{staticClass:"fs-l text-black"},[t._v(" "+t._s(e.from.nickname)+" ")]):t._e(),s("span",{staticClass:"fs-m text-dark-6"},[t._v(" "+t._s(t._f("timeAgo")(e.createdAt))+" ")])]),e.fabulous?s("div",{staticClass:"d-flex flex-coloum jc-start",class:t._f("IsFabulous")(e.fabulous)},[s("div",{on:{click:function(s){return t.thumbsUp(e["_id"],a,!0)}}},[s("i",{staticClass:"iconfont icon-dianzan fs-xxl"})]),e.fabulous?s("span",{staticClass:"fs-m text-center"},[t._v(t._s(e.fabulous.length>0?e.fabulous.length:"赞"))]):t._e()]):t._e()]),s("div",{staticClass:"item-body mt-2"},[s("p",{staticClass:"fs-l "},[e.reply?s("span",[t._v("回复 "+t._s(e.reply.nickname)+"：")]):t._e(),t._v(t._s(e.content)+" ")])])])}))],2)],1),s("ArtReply",{ref:"ArtReplyDetail",attrs:{placeholder:t.placeholder},on:{submit:t.submitCommends}})],1)},wt=[],Ct={components:{ArtReply:ct},props:{id:{}},data(){return{model:{},childs:[],isSubmit:!1,limit:5,page:0,isMoreLoading:!1,loading:!1,noMore:!1,placeholder:"回复层主",reply:null}},computed:{...Object(p["b"])(["getUserId"])},created(){this.Init()},watch:{reply(){this.placeholder=null===this.reply?"回复层主":"@"+this.reply.nickname+"："}},methods:{async Init(){this.page=0,this.model=await this.fetch(`/art_commend/${this.id}`,{limit:this.limit,page:this.page}),this.childs=Object.assign([],this.model.childs)},async submitCommends(t){if(!this.isSubmit){this.isSubmit=!0;const e=JSON.parse(localStorage.getItem("m_userInfo")).id,s={article:this.model.article,content:t,from:e,to:this.id};null!=this.reply&&(s.reply=this.reply["_id"]),await this.post("art_commend",s),this.isSubmit=!1,this.IndicatorOpen("正在评论"),setTimeout(()=>{this.Init(),this.IndicatorClose(),this.AlertSuccess("评价完成")},1500)}},async loadMore(){if(1==this.noMore)return;this.loading=!0,this.page+=1;const{childs:t}=await this.fetch(`/art_commend/${this.id}`,{limit:this.limit,page:this.page});setTimeout(()=>{if(t.length>0){for(let e=0;e<t.length;e++)this.childs.push(t[e]);this.isMoreLoading=!this.isMoreLoading,this.loading=!1}else this.loading=!1,this.isMoreLoading=!this.isMoreLoading,this.noMore=!0},1500)},replyTo(t){this.reply=Object.assign({},t)},removeReply(){this.reply=null},async thumbsUp(t,e){if(t){await this.setFabulous(t,"art_fabulous");let s=await this.fetch(`rest/art_commend/${t}`,{populate:{path:"from fabulous"}});this.$set("number"===typeof e?this.childs[e]:this.model,"fabulous",s.fabulous)}}}},yt=Ct,kt=(s("7120"),Object(n["a"])(yt,bt,wt,!1,null,null,null)),jt=kt.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"articleType-page w-100 d-flex flex-coloum jc-start "},[s("MyHeader",{attrs:{title:t.category.title}},[s("i",{staticClass:"iconfont icon-gengduo fs-xl",on:{click:t.selectCategory}})]),s("div",{staticClass:"main"},[s("MySearch",{on:{inputSearch:t.searchArticles}}),t.list.length>0?s("MyLoadMore",{attrs:{noMore:t.option.noMore,loading:t.option.loading},on:{loadMore:function(e){return t.loadMore(t.option,t.fetchArticles,t.list)}}},t._l(t.list,(function(e){return s("li",{key:e["_id"],on:{click:function(s){return t.routeByName("articleDetail",e["_id"])}}},[s("div",{staticClass:"w-100  p-2 d-flex jc-between",staticStyle:{height:"8rem"}},[s("div",{staticClass:"flex-1 d-flex flex-coloum jc-between bb mr-2 pb-1"},[s("p",{staticClass:"fs-m"},[s("strong",{staticClass:"text-tomato"},[t._v("["+t._s(t.category.title)+"]")]),t._v(" "+t._s(e.title)+" ")]),s("div",{staticClass:"d-flex jc-start ai-center text-dark-6"},[s("span",{staticClass:"fs-m d-flex ai-center mr-2"},[e.commends?s("i",{staticClass:"iconfont icon-liaotian mr-1 fs-m"}):t._e(),t._v(" "+t._s(e.commends.length)+" ")]),s("span",{staticClass:"fs-m px-2 d-flex ai-center mr-1"},[s("i",{staticClass:"iconfont icon-shijian mr-1 fs-m"}),t._v(" "+t._s(t._f("timeAgo")(e.createdAt))+" ")]),s("span",{staticClass:"fs-m px-2 d-flex ai-center"},[s("i",{staticClass:"iconfont icon-ai-eye mr-2 fs-x"}),t._v(t._s(e.reads?e.reads:"0"))])])]),s("img",{staticClass:"h-90 w-40",attrs:{src:e.cover?e.cover:t.default_img}})])])})),0):s("MyBlankPage")],1),s("mt-popup",{staticClass:"category-window ",staticStyle:{"border-radius":"0.5rem"},attrs:{"popup-transition":"popup-fade"},model:{value:t.showCategoriesWindow,callback:function(e){t.showCategoriesWindow=e},expression:"showCategoriesWindow"}},[s("ul",t._l(t.categories,(function(e){return s("li",{key:e["_id"]},[s("mt-button",{staticClass:"my-3 text-dark letter-s1 fw",attrs:{type:"default",size:"large"},on:{click:function(s){return t.switchCategory("ArticleType",e["_id"])}}},[t._v(" "+t._s(e.title)+" ")])],1)})),0)])],1)},It=[],Pt={props:{id:{}},components:{MySearch:F},data(){return{search:"",showCategoriesWindow:!1,categories:[],category:{title:""},list:[],option:{limit:10,page:0,loading:!1,noMore:!1}}},computed:{limit(){return this.option.limit},noMore(){return this.option.noMore}},watch:{async $route(t,e){"ArticleType"===t.name&&(this.option=Object.assign({},{limit:10,page:0,loading:!1,noMore:!1}),this.initCategories(),this.list=await this.fetchArticles())}},async created(){await this.initCategories(),this.list=await this.fetchArticles()},methods:{async fetchArticles(){const t=await this.fetch("/rest/articles/",{limit:this.option.limit,page:this.option.page,where:{category:this.id},match:{key:"title",val:this.search},populate:{path:"commends",select:"id"}});return t},async initCategories(){this.category=await this.fetch(`/rest/categories/${this.id}`),this.categories=await this.fetch("/categories")},async searchArticles(t){this.search=t,this.list=await this.fetchArticles(),this.page=0},async selectCategory(){this.showCategoriesWindow=!this.showCategoriesWindow},switchCategory(t,e){e!==this.id&&this.routeByName(t,e),this.showCategoriesWindow=!this.showCategoriesWindow}}},St=Pt,$t=(s("e212"),Object(n["a"])(St,Mt,It,!1,null,null,null)),At=$t.exports,Ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"player-page"},[s("div",{staticClass:"bg-dark"},[s("div",{staticClass:"pt-2 px-3"},[s("i",{staticClass:"iconfont icon-fanhui fs-xxl text-white",on:{click:t.routeBack}})]),s("div",{staticClass:"py-3 fw text-white d-flex flex-coloum jc-center ai-center"},[s("img",{staticClass:"header1 mb-1 w70 h70 b-radius50",attrs:{src:t.model.avatar?t.model.avatar:t.defaultHeader}}),s("p",{staticClass:"fs-xl letter-s1"},[t._v(t._s(t.model.cname))]),s("p",{staticClass:"fs-m"},[t._v(t._s(t.model.ename))])]),s("div",{staticClass:"letter-s1 px-2 pb-2 d-flex jc-around ai-center"},t._l(t.navList,(function(e,a){return s("span",{key:a,staticClass:"fw",class:t.selected==a?"active":"else",on:{click:function(e){t.selected=a}}},[t._v(" "+t._s(e)+" ")])})),0)]),s("div",{staticClass:"main"},[s("swiper",{ref:"playerSwiper",attrs:{options:{autoHeight:!0}}},[s("swiper-slide",[s("div",{staticClass:"p-4 fs-xl data letter-s1"},[s("p",[s("span",{staticClass:"text-dark-6"},[t._v("生日")]),t._v(" "+t._s(t._f("formatDay")(this.model.birthday))+" ")]),s("p",[s("span",{staticClass:"text-dark-6"},[t._v("年龄")]),t._v(" "+t._s(t._f("formatBirth")(this.model.birthday))+"岁 ")]),s("p",[s("span",{staticClass:"text-dark-6"},[t._v("性别")]),t._v(" "+t._s(this.model.gender?"男":"女")+" ")]),s("p",[s("span",{staticClass:"text-dark-6"},[t._v("身高")]),t._v(" "+t._s(this.model.height)+"cm ")]),s("p",[s("span",{staticClass:"text-dark-6"},[t._v("国籍")]),t._l(t.model.country,(function(e){return s("span",{key:e},[t._v(" "+t._s(e)+" ")])}))],2),s("p",[s("span",{staticClass:"text-dark-6"},[t._v("持拍")]),t._v(" "+t._s(this.model.habithand?"右手持拍":"左手持拍")+" ")]),s("p",[s("span",{staticClass:"text-dark-6"},[t._v("反手")]),t._v(" "+t._s(this.model.backhand?"单手式持拍":"双手式持拍")+" ")]),t.model.retire?s("p",[s("span",{staticClass:"text-dark-6"},[t._v("情况")]),t._v(" 已退役 ")]):s("p",[s("span",{staticClass:"text-dark-6"},[t._v("积分")]),t._v(" "+t._s(this.model.integral)+" ")]),s("p",[s("span",{staticClass:"text-dark-6"},[t._v("荣誉")]),t._v(" "+t._s(0==this.model.grandslam?"":this.model.grandslam+"次大满贯")+" "+t._s(0==this.model.championships?"":this.model.championships+"次单打冠军")+" ")])])]),s("swiper-slide",[t.model.articles?s("ArtItem",{attrs:{list:t.model.articles,catTitle:t.model.ename}}):s("MyBlankPage")],1),s("swiper-slide",[t.model.videos?s("div",t._l(t.model.videos,(function(t){return s("VideoItem",{key:t["_id"],attrs:{hiddenMoreBtn:!0,video:t,posterDate:t.createdAt}})})),1):s("MyBlankPage")],1)],1)],1)])},Tt=[],Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.video?s("div",{staticClass:"bb d-flex flex-start ai-center p-2",on:{click:function(e){return t.routeByName("videoDetail",t.video["_id"])}}},[s("img",{staticClass:"h-100 w-30 flex-1 b-radius5",attrs:{src:t.video.cover}}),s("div",{staticClass:"w-70 d-flex flex-coloum pl-2"},[s("p",{staticClass:"fs-m text-over"},[t._v(t._s(t.video.title))]),s("span",{staticClass:"fs-m"},[s("i",{staticClass:"iconfont icon-fabu"}),t._v(" "+t._s(t.video.author))]),s("div",{staticClass:"d-flex jc-between ai-center text-dark-6"},[s("span",{staticClass:"fs-m w60"},[s("i",{staticClass:"fs-m iconfont icon-bofang mr-1"}),t._v(t._s(t._f("formatReads")(t.video.reads)))]),t.collectDate?s("span",{staticClass:"fs-m flex-1"},[t._v("收藏于 "+t._s(t._f("formatMD")(t.collectDate)))]):s("span",{staticClass:"fs-m flex-1"},[t._v("发布于 "+t._s(t._f("formatMD")(t.posterDate)))]),t.hiddenMoreBtn?t._e():s("i",{staticClass:"iconfont icon-gengduo_huaban fw",on:{click:function(e){return e.stopPropagation(),t.openActionSheet(t.item["_id"])}}})])])]):t._e()},Dt=[],Lt={props:{route:{type:String,require:!0},video:{},collectDate:{type:String},posterDate:{type:String},hiddenMoreBtn:{type:Boolean}}},Et=Lt,Nt=Object(n["a"])(Et,Bt,Dt,!1,null,null,null),Ut=Nt.exports,zt={props:{id:{}},components:{ArtItem:G,VideoItem:Ut},data(){return{navList:["球员资料","相关文章","视频推荐"],videos:{limit:10,page:0,loading:!1,noMore:!1},selected:0,model:{}}},watch:{selected(){this.$refs.playerSwiper.swiper.slideTo(this.selected)}},created(){this.fetchPlayer()},methods:{async fetchPlayer(){this.model=await this.fetch(`rest/player/${this.id}`,{populate:{path:"articles videos"}})}}},Ht=zt,Rt=(s("5770"),Object(n["a"])(Ht,Ot,Tt,!1,null,null,null)),Vt=Rt.exports,qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"person-page bg-grey-1 "},[s("div",{staticClass:"person-header w-100 bg-dark px-3 pb-5 pt-2"},[s("p",{staticClass:"text-white text-center letter-s1 mb-4"},[t._v("我的")]),s("div",{staticClass:" d-flex jc-between ai-center"},[t.userInfo?s("div",{staticClass:"person-avatar h60 d-flex ai-center jc-start"},[s("img",{staticClass:"w60 h60 b-radius-50",attrs:{src:t.userInfo.avatar?t.userInfo.avatar:t.defaultHeader},on:{click:function(e){return t.routeByName("avatar")}}}),s("div",{staticClass:"ml-3 h-100 d-flex flex-coloum jc-around"},[s("span",{staticClass:"fs-l fw letter-s1 text-white"},[t._v(" "+t._s(t.userInfo.nickname))]),s("span",{staticClass:"b-radius10 bg-l-grey text-dark fs-m text-center px-1"},[s("i",{staticClass:"iconfont icon-dianhua fs-m"}),t._v(t._s(t.userInfo.tel))])])]):t._e(),s("i",{staticClass:"iconfont icon-icon-- fs-lxx text-white ml-3",on:{click:function(e){return t.routeByName("info")}}})])]),s("div",{staticClass:"person-main pt-3"},[t._l(t.menus,(function(e,a){return s("div",{key:a,staticClass:"line bg-white bb mb-2 p-2 d-flex jc-between ai-center",on:{click:function(s){return t.routeByName(e.route,e.routeId?e.routeId:"")}}},[s("i",{staticClass:"iconfont fs-xxl",class:[e.icon,e.color]}),s("p",{staticClass:"flex-1 pl-3 fs-l"},[t._v(t._s(e.title))]),s("i",{staticClass:"iconfont icon-icon-arrow-right2 fs-xl"})])})),s("div",{staticClass:"w-100 h40 d-flex jc-center ai-center pt-5"},[s("mt-button",{staticClass:"letter-s1 w-50",staticStyle:{"box-shadow":"1px 3px 4px #888"},attrs:{size:"large",type:"danger"},on:{click:t.loginOut}},[t._v("注销登录")])],1)],2)])},Ft=[],Wt={computed:{...Object(p["d"])({userInfo:t=>t.userInfo}),...Object(p["b"])(["getUserId"])},async created(){await this.getUserInfo()},mounted(){this.menus=[{icon:"icon-geren",title:"账户信息",color:"text-blue-1",route:"info"},{icon:"icon-navicon-wzgl",title:"文章收藏",color:"text-tomato",route:"artCollect",routeId:this.getUserId},{icon:"icon-pinglun",title:"我的评论",color:"text-purple",route:"myCommend",routeId:this.getUserId},{icon:"icon-shipin",title:"视频收藏",color:"text-steel",route:"videoCollect",routeId:this.getUserId},{icon:"icon-tiezi",title:"帖子收藏",color:"text-black",route:"postCollect",routeId:this.getUserId},{icon:"icon-liaotian",title:"帖子管理",color:"text-orange",route:"postCommend",routeId:this.getUserId},{icon:"icon-wangqiu1",title:"装备关注",color:"text-steel",route:"productCollect",routeId:this.getUserId},{icon:"icon-lianxi",title:"联系我们",color:"text-red",route:"callus"}]},data(){return{menus:[]}},methods:{loginOut(){h["MessageBox"].confirm("",{message:"是否注销登录？",title:"友情提示",confirmButtonText:"确认",cancelButtonText:"取消"}).then(t=>{"confirm"==t&&(this.removeItem("m_userInfo"),this.removeItem("m_token"),this.routeByName("login"))}).catch(t=>{})},...Object(p["c"])(["getUserInfo","removeItem"])}},Yt=Wt,Jt=(s("ce1b"),Object(n["a"])(Yt,qt,Ft,!1,null,null,null)),Zt=Jt.exports,Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"avatar-page w-100 bg-grey-0"},[s("MyHeader",{attrs:{title:"设置个人头像"}}),s("div",{staticClass:"wrap h-40"},[t.userInfo?s("img",{staticClass:"img w-100 h-100",attrs:{src:t.userInfo.avatar?t.userInfo.avatar:t.defaultHeader,alt:"头像封面"}}):t._e()]),s("div",{staticClass:"pt-5 px-6 submitWrap"},[s("form",{staticClass:"d-flex flex-coloum jc-center ai-center",attrs:{method:"post"}},[s("div",{staticClass:"btn bg-white w-80 h50 b-radius10 mt-5"},[s("span",{staticClass:"title letter-s1 fs-xl fw text-dark"},[t._v("上传头像")]),s("input",{ref:"uploadAvatar",staticClass:"file_input",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:t.uploadAvatar}})]),s("div",{staticClass:"btn bg-white w-80 h50 b-radius10 mt-5"},[s("span",{staticClass:"title letter-s1 fs-xl fw text-dark",on:{click:t.routeBack}},[t._v("取消设置")])])])])],1)},Gt=[],Kt={computed:{...Object(p["d"])({userInfo:t=>t.userInfo})},data(){return{}},methods:{async uploadAvatar(){if(this.userInfo){const t=new FormData;t.append("file",this.$refs.uploadAvatar.files[0]);const e=await this.post("uploads",t),{url:s}=e,a=Object.assign({},this.userInfo);a.avatar=s;const i=await this.put(`/rest/users/${this.userInfo["_id"]}`,a);setTimeout(()=>{i&&(this.AlertSuccess("操作成功"),this.getUserInfo())},500)}},...Object(p["c"])(["getUserInfo"])}},Xt=Kt,te=(s("392d"),Object(n["a"])(Xt,Qt,Gt,!1,null,null,null)),ee=te.exports,se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info-page bg-grey-1"},[s("MyHeader",{attrs:{title:"账户信息"}}),t.userInfo?s("div",{staticClass:"main pt-3"},[s("InfoLine",{attrs:{title:"账户名",closeDir:""}},[t._v(" "+t._s(t._f("shieldText")(t.userInfo.username)))]),s("InfoLine",{attrs:{title:"头像",route:"avatar"}},[s("img",{staticStyle:{width:"1.7rem",height:"1.7rem"},attrs:{src:t.userInfo.avatar?t.userInfo.avatar:t.defaultHeader}})]),s("InfoLine",{attrs:{title:"昵称",route:"infoEdit"}},[t._v(" "+t._s(t.userInfo.nickname))]),s("InfoLine",{attrs:{title:"邮箱",route:"infoEdit"}},[t._v(" "+t._s(t._f("shieldText")(t.userInfo.email)))]),s("InfoLine",{attrs:{title:"电话",route:"infoEdit"}},[t._v(" "+t._s(t._f("shieldText")(t.userInfo.tel)))]),s("InfoLine",{attrs:{title:"性别",route:"infoEdit"}},[t._v(" "+t._s(0===t.userInfo.gender?"女":"男"))]),s("InfoLine",{attrs:{title:"生日",route:"infoEdit"}},[t._v(" "+t._s(t._f("formatDay")(t.userInfo.birthday)))]),s("InfoLine",{attrs:{title:"重置密码",route:"resetPwd"}}),s("div",{staticClass:"declaration bg-white px-3 py-2"},[s("p",[t._v("个性签名")]),s("p",{staticClass:"text-grey"},[t._v(t._s(t.userInfo.declaration))])])],1):t._e()],1)},ae=[],ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"px-3 py-2 bg-white d-flex jc-between ai-center mb-2 bb",on:{click:function(e){t.route&&t.routeByName(t.route)}}},[s("span",{staticClass:"fs-l letter-s1"},[t._v(t._s(t.title))]),s("div",{staticClass:"d-flex ai-center jc-center h30"},[s("span",{staticClass:"text-grey mr-1 d-flex ai-center jc-center"},[t._t("default")],2),s("i",{directives:[{name:"show",rawName:"v-show",value:!t.closeDir,expression:"!closeDir"}],staticClass:"iconfont icon-icon-arrow-right2 fs-xl"})])])},oe=[],ne={props:{title:{type:String,require:!0},route:{type:String},closeDir:{type:Boolean}},created(){}},le=ne,re=Object(n["a"])(le,ie,oe,!1,null,null,null),ce=re.exports,de={components:{InfoLine:ce},computed:{...Object(p["d"])({userInfo:t=>t.userInfo})},async created(){await this.getUserInfo()},methods:{onValuesChange(t,e){e[0]>e[1]&&t.setSlotValue(1,e[0])},...Object(p["c"])(["getUserInfo"])}},me=de,ue=(s("aece"),Object(n["a"])(me,se,ae,!1,null,null,null)),he=ue.exports,fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"infoEdit-page"},[s("MyHeader",{attrs:{title:"修改资料信息"}}),s("form",{attrs:{method:"post"}},[s("mt-field",{attrs:{label:"昵称",placeholder:"不超过10位的昵称",state:t.fieldState[t.fieldItems.nickname]},model:{value:t.model.nickname,callback:function(e){t.$set(t.model,"nickname",e)},expression:"model.nickname"}}),s("mt-field",{attrs:{label:"邮箱",placeholder:"请输入邮箱",type:"email",state:t.fieldState[t.fieldItems.email]},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}}),s("mt-field",{attrs:{label:"手机号",placeholder:"请输入手机号",type:"tel",state:t.fieldState[t.fieldItems.tel]},model:{value:t.model.tel,callback:function(e){t.$set(t.model,"tel",e)},expression:"model.tel"}}),s("div",{staticClass:"ml-2 pl-1 pr-3 py-2 d-flex jc-between ai-center bt",on:{click:function(e){return t.$refs.birthdayPicker.open()}}},[s("span",{staticClass:"w100 mr-1"},[t._v("生日")]),s("p",{staticClass:"flex-1"},[t._v(t._s(t._f("formatDay")(t.model.birthday)))]),s("i",{staticClass:"iconfont icon-jianyi"})]),s("mt-radio",{staticClass:"bt",attrs:{title:"性别",options:t.options},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}}),s("mt-field",{attrs:{label:"个性签名",placeholder:"此用户很懒，什么都没留下",type:"textarea",rows:"4"},model:{value:t.model.declaration,callback:function(e){t.$set(t.model,"declaration",e)},expression:"model.declaration"}})],1),s("div",{staticClass:"d-flex jc-around pt-6"},[s("mt-button",{staticClass:"letter-s1 w-30",staticStyle:{"box-shadow":"1px 3px 4px #888"},attrs:{size:"large",type:"danger"},on:{click:t.routeBack}},[t._v("取消")]),s("mt-button",{staticClass:"letter-s1 w-30",staticStyle:{"box-shadow":"1px 3px 4px #888"},attrs:{size:"large",type:"primary"},on:{click:t.submitInfoEdit}},[t._v("提交")])],1),s("mt-datetime-picker",{ref:"birthdayPicker",attrs:{type:"date",startDate:t.startDate},on:{confirm:function(e){return t.$set(t.model,"birthday",t.birthday)}},model:{value:t.birthday,callback:function(e){t.birthday=e},expression:"birthday"}})],1)},pe=[],ve={computed:{...Object(p["d"])({userInfo:t=>t.userInfo}),nickname(){return this.model.nickname},email(){return this.model.email},tel(){return this.model.tel}},data(){return{model:{},gender:"0",birthday:"",declaration:"",startDate:new Date("1930/1/1"),options:[{label:"女生",value:"0"},{label:"男生",value:"1"}],fieldItems:{nickname:2,email:2,tel:2},fieldState:["success","error","warning"]}},watch:{nickname(){this.nickname.length>10&&(this.fieldItems.nickname=1),""===this.nickname&&(this.fieldItems.nickname=2),""!==this.nickname&&this.nickname.length<10&&(this.fieldItems.nickname=0)},email(){let t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;""===this.email?this.fieldItems.email=2:!0===t.test(this.email)?this.fieldItems.email=0:this.fieldItems.email=1},tel(){let t=/^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$/;""===this.tel?this.fieldItems.tel=2:!0===t.test(this.tel)?this.fieldItems.tel=0:this.fieldItems.tel=1}},created(){this.model=Object.assign({},this.userInfo),this.gender=String(this.model.gender),this.initBirthday()},methods:{initBirthday(){this.model.birthday&&(this.birthday=this.model.birthday)},async submitInfoEdit(){if(this.$set(this.model,"gender",Number(this.gender)),this.model){await this.put(`/rest/users/${this.userInfo["_id"]}`,this.model);this.AlertSuccess("修改成功"),setTimeout(()=>{this.routeBack()},1500)}},...Object(p["c"])(["getUserInfo"])}},ge=ve,_e=(s("a02b"),Object(n["a"])(ge,fe,pe,!1,null,null,null)),xe=_e.exports,be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"articleType-page w-100 d-flex flex-coloum jc-start "},[s("MyHeader",{attrs:{title:"文章收藏"}}),s("div",{staticClass:"main"},[t.collections.length>0?s("MyLoadMore",{attrs:{noMore:t.option.noMore,loading:t.option.loading},on:{loadMore:function(e){return t.loadMore(t.option,t.fetchArtCollections,t.collections,0,1)}}},t._l(t.collections,(function(e){return s("li",{key:e["_id"]},[e.article?s("div",{staticClass:"w-100  p-2 d-flex jc-between",staticStyle:{height:"8rem"},on:{click:function(s){return t.routeByName("articleDetail",e.article["_id"])}}},[s("div",{staticClass:"flex-1 d-flex flex-coloum jc-between bb mr-2 pb-1"},[s("p",{staticClass:"fs-m"},[s("strong",{staticClass:"text-tomato"},[t._v("["+t._s(e.article.category.title)+"]")]),t._v(" "+t._s(e.article.title)+" ")]),s("div",{staticClass:"d-flex jc-start ai-center text-dark-6"},[s("span",{staticClass:"fs-m d-flex ai-center mr-2"},[s("i",{staticClass:"iconfont icon-liaotian mr-1 fs-m"}),t._v(" "+t._s(e.article.commends.length)+" ")]),s("span",{staticClass:"fs-m px-2 d-flex ai-center mr-1"},[s("i",{staticClass:"iconfont icon-shijian mr-1 fs-m"}),t._v(" "+t._s(t._f("timeAgo")(e.article.createdAt))+" ")]),s("span",{staticClass:"fs-m px-2 d-flex ai-center"},[s("i",{staticClass:"iconfont icon-ai-eye mr-2 fs-x"}),t._v(t._s(e.article.reads?e.article.reads:"0"))])])]),s("img",{staticClass:"h-90 w-40",attrs:{src:e.article.cover?e.article.cover:t.default_img}})]):s("div",{staticClass:"px-2 pt-2"},[s("invalid-item",{attrs:{title:"周边信息已被删除，此收藏已失效"},on:{removeMethod:function(s){return t.removeActionSheet(e["_id"],t.remove)}}})],1)])})),0):s("MyBlankPage"),s("mt-actionsheet",{attrs:{actions:t.options},model:{value:t.remove.state,callback:function(e){t.$set(t.remove,"state",e)},expression:"remove.state"}})],1)],1)},we=[],Ce={props:{id:{}},data(){return{showCategoriesWindow:!1,collections:[],option:{limit:10,page:0,loading:!1,noMore:!1},options:[{name:"移除收藏",method:this.removeCollect}],remove:{state:!1,target:null}}},async created(){this.init()},methods:{async init(){this.option.page=0,this.collections=await this.fetchArtCollections()},async fetchArtCollections(){const t={limit:this.limit,page:this.page,populate:JSON.stringify({path:"article",populate:{path:"commends category",select:"_id title"}})},e=await this.fetch(`/rest/art_collection/collections/${this.id}`,t);return e},async removeCollect(){if(this.remove.target){const t=await this.$http.delete(`rest/art_collection/${this.remove.target}`);t&&(this.AlertSuccess("移除成功"),this.remove.target=null,setTimeout(()=>{this.init()},1e3))}}}},ye=Ce,ke=(s("47c1"),Object(n["a"])(ye,be,we,!1,null,null,null)),je=ke.exports,Me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"myCommend-page"},[s("SwiperHeader",{attrs:{swiperIndex:t.swiperIndex,title:"我的评论",itemList:["文章","视频"]},on:{swiperClick:t.swiperClick}}),s("div",{staticClass:"main"},[s("swiper",{ref:"MyCommendSwiper",staticClass:"bg-white",attrs:{options:{autoHeight:!0}},on:{"slide-change":function(){t.swiperIndex=t.$refs.MyCommendSwiper.swiper.realIndex}}},[s("swiper-slide",{key:"0"},[t.articleList.length>0?s("MyLoadMore",{attrs:{loading:t.swiper1.loading,noMore:t.swiper1.noMore},on:{loadMore:function(e){return t.loadMore(t.swiper1,t.fetchArticleCommend,t.articleList,t.swiperIndex,0)}}},t._l(t.articleList,(function(e){return s("li",{directives:[{name:"show",rawName:"v-show",value:0===t.swiperIndex,expression:"swiperIndex === 0"}],key:e["_id"],staticClass:"p-2",on:{click:function(s){return t.routeByName("articleDetail",e.article["_id"])}}},[e.article?s("div",{staticClass:"bb d-flex flex-coloum"},[s("div",{staticClass:"d-flex ai-center"},[s("img",{staticClass:"w40 h40 b-radius-50",attrs:{src:e.from.avatar?e.from.avatar:t.defaultHeader}}),s("div",{staticClass:"w-80 d-flex flex-coloum fs-m pl-2"},[s("span",[t._v(t._s(e.from.nickname))]),s("span",{staticClass:"text-dark-6 text-over"},[t._v(t._s(t._f("timeAgo")(e.createdAt))+" · "+t._s(e.article.title))])]),s("div",{staticClass:"flex-1 d-flex jc-end"},[s("i",{staticClass:"iconfont icon-gengduo_huaban fw",on:{click:function(s){return s.stopPropagation(),t.openActionSheet(e["_id"])}}})])]),s("div",{staticClass:"mt-2 mb-2 pb-1 d-flex jc-start ai-center"},[s("div",{staticClass:"w-80 pl-6 mr-2"},[s("p",{staticClass:"fs-l text-dark text-over-3 lh13"},[t._v(" "+t._s(e.content)+" ")])]),s("div",{staticClass:"w-20 h50"},[e.to?s("p",{staticClass:"text-dark fs-m  text-over-3"},[s("i",{staticClass:"iconfont icon-liaotian fs-m"}),t._v(" "+t._s(e.to.content)+" ")]):s("img",{staticClass:"w-100 h-100",attrs:{src:e.article.cover?e.article.cover:t.default_img}})])])]):s("invalid-item",{attrs:{title:"原文章已被删除，该评论已失效"},on:{removeMethod:function(s){return t.openActionSheet(e["_id"])}}})],1)})),0):s("MyBlankPage")],1),s("swiper-slide",{key:"1"},[t.videoList.length>0?s("MyLoadMore",{attrs:{loading:t.swiper2.loading,noMore:t.swiper2.noMore},on:{loadMore:function(e){return t.loadMore(t.swiper2,t.fetchVideoCommend,t.videoList,t.swiperIndex,1)}}},t._l(t.videoList,(function(e){return s("li",{directives:[{name:"show",rawName:"v-show",value:1===t.swiperIndex,expression:"swiperIndex === 1"}],key:e["_id"],staticClass:"p-2",on:{click:function(s){return t.routeByName("videoDetail",e.parent["_id"])}}},[e.parent?s("div",{staticClass:"bb d-flex flex-coloum"},[s("div",{staticClass:"d-flex ai-center"},[s("img",{staticClass:"w40 h40 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}),s("div",{staticClass:"w-80 d-flex flex-coloum fs-m pl-2"},[s("span",[t._v(t._s(e.user.nickname))]),s("span",{staticClass:"text-dark-6 text-over"},[t._v(t._s(t._f("timeAgo")(e.createdAt))+" · "+t._s(e.parent.title))])]),s("div",{staticClass:"flex-1 d-flex jc-end"},[s("i",{staticClass:"iconfont icon-gengduo_huaban fw",on:{click:function(s){return s.stopPropagation(),t.openActionSheet(e["_id"])}}})])]),s("div",{staticClass:"mt-2 mb-2 pb-1 d-flex jc-start ai-center"},[s("div",{staticClass:"w-80 pl-6 mr-2"},[s("p",{staticClass:"fs-l text-dark text-over-3 lh13"},[t._v(" "+t._s(e.content)+" ")])]),s("div",{staticClass:"w-20 h50"},[e.commend?s("p",{staticClass:"text-dark fs-m  text-over-3"},[s("i",{staticClass:"fs-m iconfont icon-liaotian"}),t._v(" "+t._s(e.commend.content)+" ")]):s("img",{staticClass:"w-100 h-100",attrs:{src:e.parent.cover?e.parent.cover:t.default_img}})])])]):s("invalid-item",{attrs:{title:"原视频已被删除，该评论已失效"},on:{removeMethod:function(s){return t.openActionSheet(e["_id"])}}})],1)})),0):s("MyBlankPage")],1)],1),s("mt-actionsheet",{attrs:{actions:t.options},model:{value:t.removeState,callback:function(e){t.removeState=e},expression:"removeState"}})],1)],1)},Ie=[],Pe={props:{id:{}},components:{SwiperHeader:pt},data(){return{swiperIndex:0,articleList:[],videoList:[],removeState:!1,removeTarget:null,options:[{name:"删除评论",method:this.removeCommend}],swiper1:{limit:5,page:0,loading:!1,noMore:!1},swiper2:{limit:5,page:0,loading:!1,noMore:!1}}},watch:{swiperIndex(){this.$refs.MyCommendSwiper.swiper.slideTo(this.swiperIndex)}},created(){this.init()},methods:{async init(){this.articleList=await this.fetchArticleCommend(),this.videoList=await this.fetchVideoCommend()},async fetchArticleCommend(){return await this.fetch("rest/art_commend",{where:{from:this.id},populate:{path:"article from to"},limit:this.swiper1.limit,page:this.swiper1.page,sort:{_id:-1}})},async fetchVideoCommend(){return await this.fetch("rest/video_commend",{where:{user:this.id},limit:this.swiper2.limit,page:this.swiper2.page,populate:{path:"parent user commend"},sort:{_id:-1}})},swiperClick(t){this.swiperIndex=t},openActionSheet(t){this.removeTarget=t,this.removeState=!0},async removeCommend(){if(this.removeTarget){const t=0===this.swiperIndex?`rest/art_commend/${this.removeTarget}`:`rest/video_commend/${this.removeTarget}`,e=await this.$http.delete(t);e&&(await this.$http.delete(0===this.swiperIndex?`rest/art_fabulous/remove_fabulou/${this.removeTarget}`:`rest/video_fabulous/remove_fabulou/${this.removeTarget}`),this.AlertSuccess(e.data.message),this.init())}}}},Se=Pe,$e=(s("aa00"),Object(n["a"])(Se,Me,Ie,!1,null,null,null)),Ae=$e.exports,Oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"postCollect-page"},[s("MyHeader",{attrs:{title:"帖子收藏"}}),s("div",{staticClass:"main"},[t.posts.length>0?s("MyLoadMore",{attrs:{loading:t.option.loading,noMore:t.option.noMore},on:{loadMore:function(e){return t.loadMore(t.option,t.fecthPost,t.posts,0,1)}}},t._l(t.posts,(function(e,a){return s("li",{key:a,staticClass:"px-3 pt-3"},[e.post?s("div",{staticClass:"postItem bb",on:{click:function(s){return t.routeByName("postDetail",e.post["_id"])}}},[e.post.user?s("div",{staticClass:"h40 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:e.post.user.avatar?e.post.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(" "+t._s(e.post.user.nickname))]),s("span",{staticClass:"text-grey fs-m  h-50"},[t._v(" "+t._s(t._f("timeAgo")(e.post.createdAt)))])]),s("i",{staticClass:"iconfont icon-gengduo_huaban fw",on:{click:function(s){return s.stopPropagation(),t.openActionSheet(e["_id"])}}})]):t._e(),s("div",{staticClass:"content mt-2"},[s("p",{staticClass:"text fs-l",domProps:{innerHTML:t._s(e.post.content)}})]),s("div",{staticClass:"d-flex jc-start ai-center py-2"},[s("div",{staticClass:"mr-4 d-flex ai-center"},[s("i",{staticClass:"iconfont icon-pinglun mr-1 fs-xxl"}),s("span",{staticClass:"fs-m"},[t._v(t._s(e.post.counts.length)+" ")])]),s("div",{staticClass:"fs-m d-flex ai-center"},[s("i",{staticClass:"iconfont icon-dianzan mr-1 fs-xl"}),s("span",{staticClass:"fs-m"},[t._v(t._s(e.post.fabulous.length)+" ")])]),s("div",{staticClass:"flex-1 text-right"},[s("span",{staticClass:"fs-m text-dark"},[t._v("收藏于 "+t._s(t._f("formatDay")(e.createdAt)))])])])]):s("invalid-item",{attrs:{model:e,title:"帖子"},on:{removeMethod:function(s){return t.openActionSheet(e["_id"])}}})],1)})),0):s("MyBlankPage"),s("mt-actionsheet",{attrs:{actions:t.options},model:{value:t.removeState,callback:function(e){t.removeState=e},expression:"removeState"}})],1)],1)},Te=[],Be={props:{id:{}},data(){return{options:[{name:"移除收藏",method:this.removeCommend}],removeState:!1,removeTarget:"",posts:[],option:{limit:20,page:0,loading:!1,noMore:!1}}},async created(){this.init()},methods:{async init(){this.posts=await this.fecthPost()},async fecthPost(){const t=await this.fetch("rest/post_collection",{limit:this.option.limit,page:this.option.page,populate:{path:"post",populate:{path:"counts replys fabulous user",select:"nickname avatar"}},where:{post:{$ne:null},user:this.id}});return t},childs(t,e){return Number(t+e)},async loadMore(){if(this.noMore)return;this.page+=1,this.loading=!0;const t=await this.fecthPost();setTimeout(()=>{let e=t.length;if(e>0){for(let s=0;s<e;s++)this.posts.push(t[s]);this.loading=!1}else this.loading=!1,this.noMore=!0},1500)},openActionSheet(t){this.removeTarget=t,this.removeState=!0},async removeCommend(){if(this.removeTarget){const t=await this.$http.delete(`rest/post_collection/${this.removeTarget}`);t&&(this.AlertSuccess(t.data.message),this.init())}}}},De=Be,Le=(s("08f4"),Object(n["a"])(De,Oe,Te,!1,null,null,null)),Ee=Le.exports,Ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"postCommend-page"},[s("SwiperHeader",{attrs:{title:"帖子管理",itemList:t.btns,swiperIndex:t.active},on:{swiperClick:t.navbarClick}}),s("div",{staticClass:"main"},[s("swiper",{ref:"PostCommendSwiper",staticClass:"bg-white",attrs:{options:{autoHeight:!0}},on:{"slide-change":function(){t.active=t.$refs.PostCommendSwiper.swiper.realIndex}}},[s("swiper-slide",{key:"0"},[t.posts.length>0?s("MyLoadMore",{attrs:{loading:t.swiper1.loading,noMore:t.swiper1.noMore},on:{loadMore:function(e){return t.loadMore(t.swiper1,t.fetchPosts,t.posts,t.active,0)}}},t._l(t.posts,(function(e,a){return s("li",{key:a,staticClass:"px-3 pt-3",on:{click:function(s){return t.routeByName("postDetail",e["_id"])}}},[s("div",{staticClass:"postItem bb"},[e.user?s("div",{staticClass:"h50 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(" "+t._s(e.user.nickname))]),s("span",{staticClass:"text-grey fs-m  h-50"},[t._v(" "+t._s(t._f("timeAgo")(e.createdAt)))])]),s("i",{staticClass:"iconfont icon-gengduo_huaban fw",on:{click:function(s){return s.stopPropagation(),t.openActionSheet(e["_id"])}}})]):t._e(),s("div",{staticClass:"content mt-2 mb-2"},[s("p",{staticClass:"text fs-l",domProps:{innerHTML:t._s(e.content)}})])])])})),0):s("MyBlankPage")],1),s("swiper-slide",{key:"1"},[t.commends.length>-0?s("MyLoadMore",{attrs:{loading:t.swiper2.loading,noMore:t.swiper2.noMore},on:{loadMore:function(e){return t.loadMore(t.swiper2,t.fetchCommend,t.commends,t.active,1)}}},t._l(t.commends,(function(e,a){return s("li",{key:a,staticClass:"px-3 pt-3",on:{click:function(s){e.parent&&t.routeByName("postDetail",e.parent["_id"])}}},[e.parent?s("div",{staticClass:"postItem bb"},[e.user?s("div",{staticClass:"h50 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(" "+t._s(e.user.nickname))]),s("span",{staticClass:"text-grey fs-m  h-50"},[t._v(" "+t._s(t._f("timeAgo")(e.createdAt)))])]),s("i",{staticClass:"iconfont icon-gengduo_huaban fw",on:{click:function(s){return s.stopPropagation(),t.openActionSheet(e["_id"])}}})]):t._e(),s("div",{staticClass:"content mt-2 mb-2"},[s("p",{staticClass:"text fs-l",domProps:{innerHTML:t._s(e.content)}})])]):s("invalid-item",{attrs:{title:"主帖已不存在"},on:{removeMethod:function(s){return t.openActionSheet(e["_id"])}}})],1)})),0):s("MyBlankPage")],1),s("swiper-slide",{key:"2"},[t.replys.length>0?s("MyLoadMore",{attrs:{loading:t.swiper3.loading,noMore:t.swiper3.noMore},on:{loadMore:function(e){return t.loadMore(t.swiper3,t.fetchReply,t.replys,t.active,2)}}},t._l(t.replys,(function(e,a){return s("li",{key:a,staticClass:"px-3 pt-3",on:{click:function(s){e.parent&&t.routeByName("postDetail",e.parent["_id"])}}},[e.parent?s("div",{staticClass:"postItem bb"},[e.user?s("div",{staticClass:"h50 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(" "+t._s(e.user.nickname))]),s("span",{staticClass:"text-grey fs-m  h-50"},[t._v(" "+t._s(t._f("timeAgo")(e.createdAt)))])])]):t._e(),s("div",{staticClass:"content mt-2 mb-2"},[s("p",{staticClass:"text fs-l",domProps:{innerHTML:t._s(e.content)}})])]):s("invalid-item",{attrs:{title:"主帖已不存在"},on:{removeMethod:function(s){return t.openActionSheet(e["_id"])}}})],1)})),0):s("MyBlankPage")],1)],1),s("mt-actionsheet",{attrs:{actions:t.options},model:{value:t.removeState,callback:function(e){t.removeState=e},expression:"removeState"}})],1)],1)},Ue=[],ze={props:{id:{}},components:{SwiperHeader:pt},watch:{active(){this.$refs.PostCommendSwiper.swiper.slideTo(this.active)}},data(){return{btns:["主贴","回复","@我"],active:0,posts:[],commends:[],replys:[],options:[{name:"删除帖子",method:this.removePost}],swiper1:{limit:5,page:0,loading:!1,noMore:!1},swiper2:{limit:5,page:0,loading:!1,noMore:!1},swiper3:{limit:5,page:0,loading:!1,noMore:!1},removeid:"",removeState:!1}},created(){this.init()},methods:{async init(){this.posts=await this.fetchPosts(),this.commends=await this.fetchCommend(),this.replys=await this.fetchReply()},async fetchPosts(){return await this.fetch("/rest/posts",{limit:this.swiper1.limit,page:this.swiper1.page,where:{user:this.id,parent:null},populate:{path:"user"},sort:{_id:-1}})},async fetchCommend(){return await this.fetch("rest/posts",{limit:this.swiper2.limit,page:this.swiper2.page,where:{user:this.id,parent:{$ne:null}},populate:{path:"user parent"},sort:{_id:-1}})},async fetchReply(){return await this.fetch("rest/posts",{limit:this.swiper3.limit,page:this.swiper3.page,where:{reply:this.id},populate:{path:"user parent"},sort:{_id:-1}})},openActionSheet(t){this.removeState=!0,this.removeid=t},async removePost(){if(this.removeid){const t=await this.$http.delete(`rest/posts/${this.removeid}`);t&&(await this.$http.delete(`rest/post_fabulou/remove_fabulou/${this.removeid}`),this.AlertSuccess("移除成功"),setTimeout(()=>{this.init()},1e3))}},navbarClick(t){this.active=t}}},He=ze,Re=(s("99d3"),Object(n["a"])(He,Ne,Ue,!1,null,null,null)),Ve=Re.exports,qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"videoCollect-page"},[s("MyHeader",{attrs:{title:"视频收藏"}}),s("div",{staticClass:"main"},[t.list.length>0?s("MyLoadMore",{attrs:{loading:t.option.loading,noMore:t.option.noMore},on:{loadMore:function(e){return t.loadMore(t.option,t.fetchVideos,t.list,0,1)}}},t._l(t.list,(function(e){return s("li",{key:e["_id"]},[e.collect?s("VideoItem",{attrs:{route:e.collect["_id"],video:e.collect,collectDate:e.createdAt}}):s("invalid-item",{attrs:{title:"原视频已被删除，视频已失效"},on:{removeMethod:function(s){return t.openActionSheet(e["_id"])}}})],1)})),0):s("MyBlankPage"),s("mt-actionsheet",{attrs:{actions:t.options},model:{value:t.removeState,callback:function(e){t.removeState=e},expression:"removeState"}})],1)],1)},Fe=[],We={props:{id:{}},components:{VideoItem:Ut},data(){return{option:{limit:10,page:0,loading:!1,noMore:!1},list:[],options:[{name:"移除收藏",method:this.removeCollect}],removeState:!1,removeTarget:null}},watch:{removeState(){!1===this.removeState&&(this.removeTarget=null)}},created(){this.init()},methods:{async init(){this.list=await this.fetchVideos()},async fetchVideos(){return this.fetch("rest/video_collection",{where:{user:this.id},populate:{path:"collect"},limit:this.option.limit,page:this.option.page})},openActionSheet(t){this.removeState=!0,this.removeTarget=t},async removeCollect(){if(this.removeTarget){const t=await this.$http.delete(`rest/video_collection/${this.removeTarget}`);t&&(this.AlertSuccess("移除成功"),setTimeout(()=>{this.init()},1e3))}}}},Ye=We,Je=(s("448b"),Object(n["a"])(Ye,qe,Fe,!1,null,null,null)),Ze=Je.exports,Qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"resetPwd-page bg-grey-1"},[s("MyHeader",{attrs:{title:"重置密码"}}),s("form",{attrs:{method:"post"}},[s("mt-field",{attrs:{label:"旧密码",placeholder:"请输入您的旧密码",type:"password",state:t.fieldState[t.fieldItems.oldPassword]},model:{value:t.model.oldPassword,callback:function(e){t.$set(t.model,"oldPassword",e)},expression:"model.oldPassword"}}),s("mt-field",{attrs:{label:"新密码",placeholder:"请输入您的新密码",type:"password",state:t.fieldState[t.fieldItems.newPassword]},model:{value:t.model.newPassword,callback:function(e){t.$set(t.model,"newPassword",e)},expression:"model.newPassword"}}),s("mt-field",{attrs:{label:"确认密码",placeholder:"再输入一次",type:"password",state:t.fieldState[t.fieldItems.repeat]},model:{value:t.model.repeat,callback:function(e){t.$set(t.model,"repeat",e)},expression:"model.repeat"}})],1),s("div",{staticClass:"d-flex jc-around pt-6"},[s("mt-button",{staticClass:"letter-s1 w-30",staticStyle:{"box-shadow":"1px 3px 4px #888"},attrs:{size:"large",type:"danger"},on:{click:t.routeBack}},[t._v("取消")]),s("mt-button",{staticClass:"letter-s1 w-30",staticStyle:{"box-shadow":"1px 3px 4px #888"},attrs:{size:"large",type:"primary",disabled:t.submitState},on:{click:t.submitInfoEdit}},[t._v("提交")])],1)],1)},Ge=[],Ke={data(){return{model:{oldPassword:"",newPassword:"",repeat:""},fieldItems:{oldPassword:2,newPassword:2,repeat:2},fieldState:["success","error","warning"],prevent:!1}},computed:{...Object(p["b"])(["getUserId"]),oldPassword(){return this.model.oldPassword},newPassword(){return this.model.newPassword},repeat(){return this.model.repeat},submitState(){let t=!1;const e=this.fieldItems;for(let s in e)0!==e[s]&&(t=!0);return t}},watch:{oldPassword(){""===this.oldPassword?this.fieldItems.oldPassword=2:!0===/^(\w){6,20}$/.test(this.oldPassword)?this.fieldItems.oldPassword=0:this.fieldItems.oldPassword=1},newPassword(){""===this.newPassword?this.fieldItems.newPassword=2:!0===/^(\w){6,20}$/.test(this.newPassword)?this.fieldItems.newPassword=0:this.fieldItems.newPassword=1},repeat(){this.newPassword!==this.repeat?this.fieldItems.repeat=1:""===this.repeat?this.fieldItems.repeat=2:this.fieldItems.repeat=0}},methods:{async submitInfoEdit(){if(!1===this.$store.state.preventClick&&this.getUserId){const t=await this.put(`/resetPwd/${this.getUserId}`,this.model);t&&(this.AlertSuccess(t.data.message),setTimeout(()=>{this.routeBack()},1500))}}}},Xe=Ke,ts=(s("09df"),Object(n["a"])(Xe,Qe,Ge,!1,null,null,null)),es=ts.exports,ss=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"callus-page bg-grey-1"},[s("MyHeader",{attrs:{title:"联系我们"}}),t._m(0)],1)},as=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main p-2 letter-s1 fs-xl text-dark"},[s("p",[t._v("联系QQ:804487773")]),s("p",[t._v("微信:13299203097")])])}],is={},os=is,ns=(s("7e01"),Object(n["a"])(os,ss,as,!1,null,null,null)),ls=ns.exports,rs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"forum-page"},[s("MyHeader",{attrs:{title:"论坛",closeBack:""}}),s("div",{staticClass:"main"},[s("MySearch",{on:{inputSearch:t.searchPost}}),s("div",{staticClass:"postBtn bg-blue b-radius-50 w50 h50 d-flex jc-center ai-center",on:{click:function(e){return t.routeByName("postCreate")}}},[s("i",{staticClass:"iconfont icon-jianyi fs-lx text-white fw"})]),t.posts.length>0?s("MyLoadMore",{attrs:{loading:t.option.loading,noMore:t.option.noMore},on:{loadMore:function(e){return t.loadMore(t.option,t.fecthPost,t.posts)}}},t._l(t.posts,(function(e,a){return s("li",{key:a,staticClass:"px-3 pt-3",on:{click:function(s){return t.routeByName("postDetail",e["_id"])}}},[s("div",{staticClass:"postItem bb"},[e.user?s("div",{staticClass:"h40 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(t._s(e.user.nickname))]),s("span",{staticClass:"text-grey fs-m h-50"},[t._v(t._s(t._f("timeAgo")(e.createdAt)))])])]):t._e(),s("div",{staticClass:"content mt-2"},[s("p",{staticClass:"text fs-l",domProps:{innerHTML:t._s(e.content)}})]),s("div",{staticClass:"d-flex jc-start ai-center py-2"},[s("div",{staticClass:"mr-4 d-flex ai-center"},[s("i",{staticClass:"iconfont icon-pinglun mr-1 fs-xxl"}),s("span",{staticClass:"fs-m"},[t._v(t._s(e.counts.length))])]),s("div",{staticClass:"fs-m d-flex ai-center"},[s("i",{staticClass:"iconfont icon-dianzan mr-1 fs-xl"}),s("span",{staticClass:"fs-m"},[t._v(t._s(e.fabulous.length))])])])])])})),0):s("MyBlankPage")],1)],1)},cs=[],ds={components:{MySearch:F},computed:{...Object(p["b"])(["getUserId"])},data(){return{search:"",posts:[],option:{limit:10,page:0,loading:!1,noMore:!1}}},async created(){this.posts=await this.fecthPost()},methods:{async fecthPost(){const t=await this.fetch("rest/posts",{limit:this.option.limit,page:this.option.page,where:{parent:null},match:{key:"content",val:this.search},populate:{path:"user fabulous counts replys",select:"avatar nickname"},sort:{_id:-1}});return t},async searchPost(t){this.search=t,this.page=0,this.posts=await this.fecthPost()}}},ms=ds,us=(s("20d7"),Object(n["a"])(ms,rs,cs,!1,null,null,null)),hs=us.exports,fs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editPost-page"},[s("MyHeader",{attrs:{title:t.id?"编辑内容":"发布帖子"},on:{clickRight:t.submit}},[t._v(" "+t._s(t.id?"回复":"发布")+" ")]),s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"submitFile",staticClass:"submitFile",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:t.uploadImage}}),s("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{change:function(e){return t.onEditorChange(e)},ready:function(e){return t.onEditorReady(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},ps=[],vs=s("953d");s("8096"),s("a753"),s("14e1"),s("9339");const gs=[["bold","italic","underline","strike"],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],["clean"],["image"]];var _s={props:{id:{}},components:{quillEditor:vs["quillEditor"]},async created(){this.id||(this.content=localStorage.getItem("m_createPost")?localStorage.getItem("m_createPost"):"",this.imgarr=localStorage.getItem("m_createPost_imgarr")?JSON.parse(localStorage.getItem("m_createPost_imgarr")):[]),this.id&&await this.fetchPost()},computed:{editor(){return this.$refs.myQuillEditor.quill},...Object(p["b"])(["getUserId"])},data(){return{editorOption:{modules:{toolbar:{container:gs,handlers:{image:function(t){t?document.querySelector(".submitFile").click():this.quill.format("image",!1)}}}},theme:"snow",placeholder:"尽情发挥吧！"},content:"",model:null,imgarr:[]}},methods:{onEditorReady(t){},onEditorBlur(t){},onEditorFocus(t){},onEditorChange(t){},async uploadImage(){const t=new FormData;t.append("file",this.$refs.submitFile.files[0]);const e=await this.post("uploads",t),{url:s}=e;if(s){let t=this.$refs.myQuillEditor.quill,e=t.getSelection().index;t.insertEmbed(e,"image",s),t.setSelection(e+1),this.imgarr.push(s.split("/").pop())}else this.AlertError("上传失败")},async submit(){if(""!=this.content&&this.getUserId){let t;if(this.id){const e=await this.fetch(`/posts/layer/${this.id}`);t=await this.post("/rest/posts",{parent:this.id,layer:e+1,user:this.getUserId,content:this.content,imgarr:this.imgarr})}else t=await this.post("/rest/posts",{user:this.getUserId,content:this.content,imgarr:this.imgarr}),localStorage.removeItem("m_createPost");t&&(this.content="",this.AlertSuccess(this.id?"回复成功":"发布成功"),setTimeout(()=>{this.routeBack()},1500))}},async removeTempImgs(){if(this.imgarr.length>0){const t={data:{imgarr:this.imgarr}};await this.$http.delete("storage",t)}},async fetchPost(){this.model=await this.fetch(`rest/posts/${this.id}`,{populate:{path:"user"}})}},beforeRouteLeave(t,e,s){if(""==this.content||this.id)s();else{const t=this.content,e=JSON.stringify(this.imgarr);h["MessageBox"].confirm("",{message:"是否保存帖子草稿",title:"友情提示",confirmButtonText:"保存",cancelButtonText:"取消"}).then(a=>{"confirm"==a&&(localStorage.setItem("m_createPost",t),localStorage.setItem("m_createPost_imgarr",e),s())}).catch(t=>{"cancel"==t&&(this.removeTempImgs(),localStorage.removeItem("m_createPost"),localStorage.removeItem("m_createPost_imgarr"),s())})}}},xs=_s,bs=(s("8eff"),Object(n["a"])(xs,fs,ps,!1,null,null,null)),ws=bs.exports,Cs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"postDetail-page"},[s("MyHeader",{attrs:{title:"帖子详情"}}),s("div",{staticClass:"main bg-grey-1"},[s("div",{staticClass:"postItem pt-3 bg-white bb px-2",on:{click:function(e){return t.routeByName("postEdit",t.model["_id"])}}},[t.model.user?s("div",{staticClass:"h40 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:t.model.user.avatar?t.model.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(t._s(t.model.user.nickname)+" ")]),s("span",{staticClass:"text-grey fs-m  h-50"},[t._v(t._s(t._f("formatDay")(t.model.createdAt)))])])]):t._e(),s("div",{staticClass:"content my-2"},[s("p",{staticClass:"text fs-l",domProps:{innerHTML:t._s(t.model.content)}})]),t.model.fabulous&&t.model.fabulous.length>0?s("div",{staticClass:"pb-1"},[s("p",{staticClass:"fs-m"},[s("span",{staticClass:"text-blue"},[t._v(" "+t._s(t.model.fabulous.length))]),t._v("人赞过 ")])]):t._e()]),s("div",{staticClass:"goods-wrap w-100 mb-1 px-2 py-3 bb bg-white"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.model.fabulous&&t.model.fabulous.length>0,expression:"model.fabulous && model.fabulous.length > 0"}],staticClass:"goods jc-start ai-center"},[t._l(t.avatarList,(function(e){return s("div",{key:e["_id"],staticClass:"items w40 h40 mr-2"},[e.user?s("img",{staticClass:"w-100 h-100 mr-3 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}):t._e(),s("i",{staticClass:"logo iconfont icon-dianzan text-tomato fs-xxl"})])})),s("span",{staticClass:"fs-lxx"},[t._v("···")])],2)]),s("div",{staticClass:"bg-white h40 d-flex jc-between ai-center px-2"},[s("div",{staticClass:"flex-1"},[s("span",{staticClass:"mr-4 letter-s1",class:0===t.active?"fs-l text-black fw":"fs-m text-dark",on:{click:function(e){t.active=0}}},[t._v("全部回复")]),s("span",{staticClass:" letter-s1",class:1===t.active?"fs-l text-black fw":"fs-m text-dark",on:{click:function(e){t.active=1}}},[t._v("只看楼主")])]),s("div",{on:{click:function(e){t.showSortBtn=!0}}},[s("span",{staticClass:"fs-m text-dark letter-s1"},[t._v(t._s(t.sortName))]),s("i",{staticClass:"iconfont icon-xiala fs-s ml-1"})])]),s("swiper",{ref:"postSwiper",staticClass:"bg-white",attrs:{options:{autoHeight:!0}},on:{"slide-change":function(){t.active=t.$refs.postSwiper.swiper.realIndex}}},[s("swiper-slide",{key:"0"},[t.commends.length>0?s("MyLoadMore",{attrs:{noMore:t.noMore,loading:t.loading},on:{loadMore:t.loadMore}},t._l(t.commends,(function(e,a){return s("li",{key:a},[s("div",{staticClass:"postItem pt-3 bg-white px-2"},[e.user?s("div",{staticClass:"h40 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(t._s(e.user.nickname)+" ")]),s("p",{staticClass:"text-grey fs-m  h-50"},[s("span",{staticClass:"letter-s1"},[t._v(t._s("第"+(e.layer+1)+"楼"))]),t._v(" · "),s("span",[t._v(t._s(t._f("formatMD")(e.createdAt)))])])]),s("div",{staticClass:"fs-m d-flex w50 ai-start jc-start text-grey mr-3"},[s("i",{staticClass:"iconfont icon-dianzan1 fs-xxl ",class:t._f("IsFabulous")(e.fabulous),on:{click:function(s){return t.thumbsUp(e["_id"],a)}}}),s("span",{staticClass:"flex-1 fs-m text-center",class:t._f("IsFabulous")(e.fabulous)},[t._v(t._s(0===e.fabulous.length?"赞":e.fabulous.length))])])]):t._e(),s("div",{staticClass:"content mt-2 px-6"},[s("p",{staticClass:"text fs-l ",domProps:{innerHTML:t._s(e.content)}}),e.childs?s("span",{directives:[{name:"show",rawName:"v-show",value:e.childs.length>0,expression:"item.childs.length > 0"}],staticClass:"fs-m text-dark-6 letter-s1 d-flex ai-center",on:{click:function(s){return t.openPopCommend(e["_id"])}}},[t._v("查看"+t._s(e.childs.length)+"条回复 "),s("i",{staticClass:"iconfont icon-xiangyou fs-s fw"})]):t._e(),s("span",{directives:[{name:"show",rawName:"v-show",value:0===e.childs.length,expression:"item.childs.length === 0"}],staticClass:"fs-m text-dark-6 letter-s1 ",on:{click:function(s){return t.openPopCommend(e["_id"])}}},[t._v("回复")])])])])})),0):s("MyBlankPage")],1),s("swiper-slide",{key:"1"},[t.commends.length>0?s("MyLoadMore",{attrs:{noMore:t.noMore,loading:t.loading},on:{loadMore:t.loadMore}},t._l(t.commends,(function(e,a){return s("li",{key:e["_id"]},[s("div",{staticClass:"postItem pt-3 bg-white px-2"},[e.user?s("div",{staticClass:"h40 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(t._s(e.user.nickname)+" ")]),s("p",{staticClass:"text-grey fs-m  h-50"},[s("span",{staticClass:"letter-s1"},[t._v(t._s("第"+(e.layer+1)+"楼"))]),t._v(" · "),s("span",[t._v(t._s(t._f("formatMD")(e.createdAt)))])])]),s("div",{staticClass:"fs-m d-flex w50 ai-start jc-start text-grey mr-3"},[s("i",{staticClass:"iconfont icon-dianzan1 fs-xxl ",class:t._f("IsFabulous")(e.fabulous),on:{click:function(s){return t.thumbsUp(e["_id"],a)}}}),s("span",{staticClass:"flex-1 fs-m text-center",class:t._f("IsFabulous")(e.fabulous)},[t._v(t._s(0===e.fabulous.length?"赞":e.fabulous.length))])])]):t._e(),s("div",{staticClass:"content mt-2 px-6"},[s("p",{staticClass:"text fs-l ",domProps:{innerHTML:t._s(e.content)}}),e.childs?s("span",{directives:[{name:"show",rawName:"v-show",value:e.childs.length>0,expression:"item.childs.length > 0"}],staticClass:"fs-m text-dark-6 letter-s1 ",on:{click:function(s){return t.openPopCommend(e["_id"])}}},[t._v("查看"+t._s(e.childs.length)+"条回复")]):t._e(),s("span",{directives:[{name:"show",rawName:"v-show",value:0===e.childs.length,expression:"item.childs.length === 0"}],staticClass:"fs-m text-dark-6 letter-s1 ",on:{click:function(s){return t.openPopCommend(e["_id"])}}},[t._v("回复")])])])])})),0):s("MyBlankPage")],1)],1)],1),s("mt-actionsheet",{attrs:{actions:t.sortList},model:{value:t.showSortBtn,callback:function(e){t.showSortBtn=e},expression:"showSortBtn"}}),s("div",{staticClass:"util px-2 d-flex ai-center"},[s("div",{staticClass:"w-60 h-70 bg-grey-1 letter-s1 b-radius10",on:{click:function(e){return t.routeByName("postEdit",t.model["_id"])}}},[s("span",{staticClass:"ml-2 fs-m text-dark-6"},[t._v("我也来说几句...")])]),s("div",{staticClass:"flex-1 pl-3 d-flex ai-center jc-between"},[s("span",{staticClass:"fs-s d-flex "},[s("i",{staticClass:"iconfont icon-pinglun fs-lx text-dark"}),t._v(t._s(t.commends.length)+" ")]),s("span",{on:{click:function(e){return t.thumbsUp(t.model["_id"])}}},[s("i",{staticClass:"iconfont icon-dianzan1 fs-xxl",class:t._f("IsFabulous")(t.model.fabulous)})]),s("span",{on:{click:t.collectPost}},[s("i",{staticClass:"iconfont icon-shoucang fs-lx text-orange",class:t.isCollect.length>0?"text-orange":"text-dark"})])])]),s("PopCommend",{attrs:{postId:this.id},on:{thumbsUp:t.thumbsUp}})],1)},ys=[],ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.commend?s("mt-popup",{staticClass:"drawer-wrap",attrs:{position:"bottom"},model:{value:t.$store.state.post.commend_drawer_state,callback:function(e){t.$set(t.$store.state.post,"commend_drawer_state",e)},expression:"$store.state.post.commend_drawer_state"}},[s("div",{staticClass:"drawer"},[s("div",{staticClass:"drawer-header p-2 d-flex jc-start"},[s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){t.$store.state.post.commend_drawer_state=!1}}}),s("p",{staticClass:"flex-1 text-center letter-s1"},[t._v(" "+t._s(t.commend.layer+1)+"楼的回复 ")])]),s("div",{staticClass:"pb-2",class:t.replys.length>0?"commend":""},[s("div",{staticClass:"postItem pt-3 bg-white px-2"},[t.commend.user?s("div",{staticClass:"h40 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:t.commend.user.avatar?t.commend.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(t._s(t.commend.user.nickname)+" ")]),s("span",{staticClass:"text-grey fs-m  h-50"},[t._v(" "+t._s(t._f("timeAgo")(t.commend.createdAt)))])]),s("div",{staticClass:"fs-m d-flex w50 ai-start jc-start text-grey mr-3"},[s("i",{staticClass:"iconfont icon-dianzan1 fs-xxl ",class:t._f("IsFabulous")(t.commend.fabulous),on:{click:function(e){return t.popThumbsUp(t.commend["_id"])}}}),s("span",{staticClass:"flex-1 fs-m text-center",class:t._f("IsFabulous")(t.commend.fabulous)},[t._v(t._s(0===t.commend.fabulous.length?"赞":t.commend.fabulous.length))])])]):t._e(),s("div",{staticClass:"content mt-2 px-6"},[s("p",{staticClass:"text fs-l ",domProps:{innerHTML:t._s(t.commend.content)}})])])]),t.replys.length>0?s("MyLoadMore",{attrs:{noMore:t.noMore,loading:t.loading},on:{loadMore:t.loadMore}},[s("li",{directives:[{name:"show",rawName:"v-show",value:t.replys.length>0,expression:"replys.length > 0"}],staticClass:"pt-2 px-2"},[s("p",{staticClass:"text-start text-dark fs-m letter-s1"},[t._v(" "+t._s(t.replys.length)+"条回复 ")])]),t._l(t.replys,(function(e,a){return s("li",{key:a},[s("div",{staticClass:"postItem pt-3 bg-white px-2"},[e.user?s("div",{staticClass:"h40 d-flex jc-start"},[s("img",{staticClass:"w40 h40 mr-2 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}),s("div",{staticClass:"flex-1 bg-white d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-l flex-1"},[t._v(t._s(e.user.nickname)+" ")]),s("span",{staticClass:"text-grey fs-m  h-50"},[t._v(" "+t._s(t._f("timeAgo")(e.createdAt)))])]),s("div",{staticClass:"fs-m d-flex w50 ai-start jc-start mr-3",class:t._f("IsFabulous")(e.fabulous)},[s("i",{staticClass:"iconfont icon-dianzan1 fs-xxl ",on:{click:function(s){return t.popThumbsUp(e["_id"],a)}}}),s("span",{staticClass:"flex-1 fs-m text-center"},[t._v(t._s(0===e.fabulous.length?"赞":e.fabulous.length))])])]):t._e(),s("div",{staticClass:"content mt-2 px-6"},[s("p",{staticClass:"text fs-l "},[e.reply?s("span",[t._v("回复 "),s("strong",{staticClass:"text-blue"},[t._v(t._s(e.reply.nickname))]),t._v("：")]):t._e(),t._v(t._s(e.content)+" ")]),s("span",{staticClass:"fs-m text-dark-6",on:{click:function(s){return t.setReply(e.user["_id"],e.user.nickname)}}},[t._v("回复")])])])])}))],2):s("MyBlankPage"),s("ArtReply",{staticClass:"replay bt",attrs:{placeholder:t.placeholder},on:{submit:t.replyPost}})],1)]):t._e()},js=[],Ms={props:{postId:{type:String,requrie:!0}},components:{ArtReply:ct},computed:{...Object(p["d"])({switch:t=>t.post.commend_drawer_state,select_commend_id:t=>t.post.select_commend_id}),...Object(p["b"])(["getUserId"])},watch:{async switch(t){!0===t&&(await this.fetchTargetPost(),await this.fetchReplys())}},data(){return{loading:!1,noMore:!1,commend:{},replys:[],placeholder:"说点什么好呢？",replyId:null}},created(){},methods:{show(){console.log(this.replys)},async fetchTargetPost(){this.select_commend_id&&(this.commend=await this.fetch(`rest/posts/${this.select_commend_id}`,{populate:JSON.stringify({path:"user fabulous"})}))},loadMore(){},async init(){await this.fetchTargetPost(),await this.fetchReplys()},async popThumbsUp(t,e){if(t){await this.setFabulous(t,"post_fabulous");let s=await this.fetch(`rest/posts/${t}`,{populate:{path:"from fabulous"}});this.$set("number"===typeof e?this.replys[e]:this.commend,"fabulous",s.fabulous)}},async replyPost(t){const e={parent:this.postId,to:this.commend["_id"],content:t,user:this.getUserId,reply:null!=this.replyId?this.replyId:this.commend.user["_id"]},s=await this.post("rest/posts",e);s&&this.init()},async fetchReplys(){this.replys=await this.fetch("rest/posts",{where:{parent:this.postId,to:this.commend["_id"]},populate:{path:"user fabulous reply",select:"nickname avatar reply.nickname"}})},async setReply(t,e){this.replyId=t,this.placeholder="@"+e}}},Is=Ms,Ps=(s("45e6"),Object(n["a"])(Is,ks,js,!1,null,null,null)),Ss=Ps.exports,$s={props:{id:{}},components:{PopCommend:Ss},computed:{...Object(p["b"])(["getUserId"]),sortName(){return 0==this.sort?"热门":1==this.sort?"正序":"倒序"}},watch:{async active(){this.IndicatorOpen(),this.commends.length=0,await this.init(),this.IndicatorClose(),this.$refs.postSwiper.swiper.slideTo(this.active)},async sort(){this.init()}},data(){return{commends:[],selectCommend:{},model:{},isCollect:[],avatarList:[],limit:20,page:0,loading:!1,noMore:!1,active:0,showSortBtn:!1,sortList:[{name:"热门",method:this.sortHot},{name:"正序",method:this.sortUp},{name:"倒序",method:this.sortDown}],sort:-1}},async created(){await this.init(),await this.fetchCollectMessage()},methods:{async init(){this.page=0,await this.fetchPost(),this.commends=await this.fetchPosts(),await this.fetchFabulousAvatar(),this.loading=!1,this.noMore=!1},async fetchPost(){const t={populate:JSON.stringify({path:"user fabulous"})};this.model=await this.fetch(`rest/posts/${this.id}`,t)},async fetchPosts(){const t=this.sort,e={page:this.page,limit:this.limit,where:{parent:this.model["_id"],to:null},populate:{path:"user childs fabulous"},sort:{_id:t}};return 1===this.active&&(e.where.user=this.model.user["_id"]),await this.fetch("rest/posts",e)},async fetchFabulousAvatar(){this.avatarList=await this.fetch("rest/post_fabulou",{where:{from:this.model["_id"]},limit:7,page:0,populate:JSON.stringify({path:"user",select:"avatar"})})},async fetchCollectMessage(){this.model["_id"]&&this.getUserId&&(this.isCollect=await this.fetch("/rest/post_collection",{where:{post:this.model["_id"],user:this.getUserId}}))},async loadMore(){if(this.noMore)return;this.page+=1,this.loading=!0;const t=await this.fetchPosts();setTimeout(()=>{let e=t.length;if(e>0){for(let s=0;s<e;s++)this.commends.push(t[s]);this.loading=!1}else this.loading=!1,this.noMore=!0},1500)},async collectPost(){if(this.model&&this.getUserId){const t=await this.post("rest/post_collection/collect",{post:this.model["_id"],user:this.getUserId});this.AlertSuccess(t.message),this.fetchCollectMessage()}},async thumbsUp(t,e){if(t&&"number"===typeof e){await this.setFabulous(t,"post_fabulou");let s=await this.fetch(`rest/post/${t}`,{populate:{path:"from fabulous"}});this.$set(this.commends[e],"fabulous",s.fabulous)}else await this.setFabulous(t,"post_fabulou"),await this.fetchPost(),await this.fetchFabulousAvatar()},async openPopCommend(t){t&&(this.$store.state.post.select_commend_id=t,this.$store.state.post["commend_drawer_state"]=!0)},sortUp(){this.sort=1},sortDown(){this.sort=-1},sortHot(){this.sort=1}}},As=$s,Os=(s("ef91"),Object(n["a"])(As,Cs,ys,!1,null,null,null)),Ts=Os.exports,Bs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"videoList-page"},[s("MyHeader",{attrs:{title:"视频",closeBack:""}}),s("div",{staticClass:"main"},[s("MySearch",{on:{inputSearch:t.searchVideo}}),t.videos.length>0?s("MyLoadMore",{attrs:{loading:t.loading,noMore:t.noMore},on:{loadMore:t.loadMore}},t._l(t.videos,(function(e){return s("li",{key:e["_id"],staticClass:"pb-2 item"},[s("div",{staticClass:"wrap",on:{click:function(s){return t.routeByName("videoDetail",e["_id"])}}},[s("div",{staticClass:"cover mb-2",staticStyle:{height:"13rem"}},[s("img",{staticClass:"w-100 h-100",attrs:{src:e.cover}})]),s("p",{staticClass:"title fw px-2"},[s("span",{staticClass:"text-tomato"},[t._v("["+t._s(e.type)+"]")]),t._v(" "+t._s(e.title)+" ")]),s("div",{staticClass:"d-flex text-dark-6 px-2"},[s("span",{staticClass:"mr-3 d-flex ai-center"},[s("i",{staticClass:"iconfont icon-bofang fs-m mr-2"}),t._v(t._s(t._f("formatReads")(e.reads)))]),s("span",{staticClass:"d-flex ai-center"},[s("i",{staticClass:"iconfont icon-pinglun fs-xl mr-2"}),t._v(t._s(t._f("formatReads")(e.commends.length))+" ")]),s("span",{staticClass:"flex-1 text-right"},[t._v(t._s(t._f("formatDay")(e.createdAt)))])])])])})),0):s("MyBlankPage")],1)],1)},Ds=[],Ls={components:{MySearch:F},data(){return{videos:[],loading:!1,noMore:!1,limit:10,page:0}},async created(){this.videos=await this.fetchVideos()},methods:{async fetchVideos(){const t=await this.fetch("rest/videos",{populate:{path:"commends"},match:{key:"title",val:this.search},limit:this.limit,page:this.page,sort:{_id:-1}});return t},async searchVideo(t){this.page=0,this.search=t,this.videos=await this.fetchVideos()},async loadMore(){if(this.noMore)return;this.page+=1,this.loading=!0;const t=await this.fetchVideos();setTimeout(()=>{let e=t.length;if(e>0){for(let s=0;s<e;s++)this.videos.push(t[s]);this.loading=!1}else this.loading=!1,this.noMore=!0},1500)}}},Es=Ls,Ns=(s("5c1a"),Object(n["a"])(Es,Bs,Ds,!1,null,null,null)),Us=Ns.exports,zs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"video-page"},[s("MyHeader",{attrs:{title:"视频详情"}},[s("router-link",{attrs:{tag:"i",to:{name:"video"}}},[s("i",{staticClass:"iconfont icon-shouye fs-xl"})])],1),s("div",{staticClass:"video-wrap bg-dark"},[""!=t.playerOptions.sources[2].src?s("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions},on:{play:function(e){return t.onPlayerPlay(e)},pause:function(e){return t.onPlayerPause(e)}}}):t._e()],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hideCommendDetail,expression:"hideCommendDetail"}],staticClass:"main d-flex flex-coloum"},[s("div",{staticClass:"tools mb-1 px-2 d-flex h40 ai-center"},[s("div",{staticClass:"flex-1 px-5 h-100 d-flex jc-start ai-center"},[s("span",{staticClass:"h-70 d-flex letter-s1 ai-center mr-5 fs-l",class:0===t.active?"active":"normal",on:{click:function(e){t.active=0}}},[t._v("简介")]),t.video.commends?s("span",{staticClass:"h-70 letter-s1 d-flex ai-center fs-l",class:1===t.active?"active":"normal",on:{click:function(e){t.active=1}}},[t._v(" 评论"+t._s(t.video.commends.length>0?t.video.commends.length:"")+" ")]):t._e()]),s("i",{staticClass:"iconfont icon-star fs-lx mr-1",class:0===t.collections.length?"text-dark-6":"text-tomato",on:{click:function(e){return t.collect(t.video["_id"],"video")}}})]),s("div",{staticClass:"content"},[s("swiper",{ref:"videoSwiper",staticClass:"bg-white",attrs:{options:{autoHeight:!0}},on:{"slide-change":function(){t.active=t.$refs.videoSwiper.swiper.realIndex}}},[s("swiper-slide",{key:"0"},[s("div",{staticClass:"p-2 bb"},[s("div",{staticClass:"d-flex"},[s("p",{staticClass:"fw flex-1 fs-l letter-s1",class:t.showInfo?"":"text-over"},[t._v(t._s(t.video.title))]),s("i",{staticClass:"ml-1 fs-xxl iconfont",class:t.showInfo?"icon-shang":"icon-weibiaoti35",on:{click:function(e){t.showInfo=!t.showInfo}}})]),s("div",{staticClass:"d-flex fs-m text-dark-6"},[s("span",{staticClass:"mr-3 d-flex ai-center"},[s("i",{staticClass:"fs-s mr-1 iconfont icon-bofang"}),t._v(" "+t._s(t._f("formatReads")(t.video.reads))+" ")]),s("span",{staticClass:"mr-3 d-flex ai-center"},[s("i",{staticClass:"fs-m mr-1 iconfont icon-pinglun"}),t._v("0 ")]),s("span",{staticClass:"mr-3"},[t._v(t._s(t._f("formatDay")(t.video.createdAt)))]),s("span",[s("i",{staticClass:"iconfont icon-fabu fs-m"}),t._v(" - "+t._s(t.video.author)+" ")])]),s("p",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],staticClass:"fs-l letter-s1"},[t._v(t._s(t.video.intro))])]),s("div",{staticClass:"p-2"},[s("p",{staticClass:"fw letter-s1"},[t._v("更多视频")]),s("div",{staticClass:"more"},[t.moreList.length>0?s("ul",t._l(t.moreList,(function(e){return s("li",{key:e["_id"]},[s("div",{staticClass:"more-item d-flex bb py-2 ai-center",on:{click:function(s){return t.routeByName("videoDetail",e["_id"])}}},[s("img",{staticClass:"more-img w-30 h70",attrs:{src:e.cover}}),s("div",{staticClass:"more-content px-2 w-70 d-flex flex-coloum"},[s("p",{staticClass:"fs-m more-title text-over"},[t._v(t._s(e.title))]),s("span",{staticClass:"fs-m"},[s("i",{staticClass:"fs-m mr-1 text-dark iconfont icon-fabu"}),t._v(" "+t._s(e.author)+" ")]),s("div",{staticClass:"d-flex text-dark-6 ai-center"},[s("span",{staticClass:"mr-3 d-flex ai-center fs-m"},[s("i",{staticClass:"fs-s mr-1 iconfont icon-bofang"}),t._v(" "+t._s(t._f("formatReads")(e.reads))+" ")]),s("span",{staticClass:"mr-3 d-flex ai-center fs-m"},[s("i",{staticClass:"fs-m mr-1 iconfont icon-pinglun"}),t._v(" "+t._s(e.commends.length)+" ")])])])])])})),0):t._e()])])]),s("swiper-slide",{key:"1"},[t.commends.length>0?s("MyLoadMore",{attrs:{loading:t.loading,noMore:t.noMore},on:{loadMore:function(e){return t.loadMore(!1)}}},t._l(t.commends,(function(e,a){return s("li",{key:a,staticClass:"px-3 pb-1 pt-3 d-flex bb"},[s("div",{staticClass:"flex-1"},[e.user?s("img",{staticClass:"w40 h40 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}):t._e()]),s("div",{staticClass:"w-90 pl-3"},[s("div",{staticClass:"h40 d-flex"},[s("div",{staticClass:"flex-1 h40 d-flex flex-coloum jc-center ai-start"},[e.user?s("span",{staticClass:"fs-m h-50 text-dark letter-s1"},[t._v(t._s(e.user.nickname))]):t._e(),s("span",{staticClass:"fs-s h-50 text-dark-6"},[t._v(" "+t._s(t._f("formatDay")(e.createdAt))+" ")])]),s("span",{staticClass:"fs-m letter-s1 text-right h30 text-tomato",on:{click:function(s){return t.replyCommend(e,a)}}},[t._v("回复")])]),s("div",{staticClass:"fs-m mt-2"},[s("p",{staticClass:"letter-s1"},[t._v(t._s(e.content))]),s("div",{staticClass:"d-flex ai-center jc-start mt-1"},[s("span",{staticClass:"fs-s mr-3",class:t._f("IsFabulous")(e.fabulous)},[s("i",{staticClass:"fs-m mr-1 iconfont icon-dianzan1",on:{click:function(s){return t.thumbsUp(e["_id"],a,!1)}}}),t._v(" "+t._s(e.fabulous.length>0?e.fabulous.length:"")+" ")]),s("span",[s("i",{staticClass:"iconfont icon-liaotian fs-m"})])])]),e.childs.length>0?s("div",{staticClass:"bg-grey-1 pl-2 mb-1 fs-m letter-s1",on:{click:function(s){return t.replyCommend(e,a)}}},[s("span",{staticClass:"fs-s text-blue"},[t._v(" 共"+t._s(e.childs.length)+"条回复 "),s("i",{staticClass:"fs-s iconfont icon-icon-arrow-right2"})])]):t._e()])])})),0):s("MyBlankPage"),s("div",{staticClass:"pop"})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"reply d-flex jc-start ai-center p-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"bg-grey-1 flex-1 h30 b-radius10 px-2",attrs:{type:"text",placeholder:"说点什么吧"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),s("span",{staticClass:"fs-l letter-s1 text-center ml-2 w40",class:t.isValid?"text-blue":"text-tomato",on:{click:t.submitVideoCommend}},[t._v("发布")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.hideCommendDetail,expression:"!hideCommendDetail"}],staticClass:"main d-flex flex-coloum"},[s("div",{staticClass:"tools mb-1 px-2 d-flex h40 ai-center jc-between"},[s("span",{staticClass:"letter-s1 fs-l"},[t._v("详情")]),s("i",{staticClass:"iconfont icon-guanbi fs-l mr-1",on:{click:function(e){t.hideCommendDetail=!t.hideCommendDetail}}})]),s("div",{staticClass:"content"},[t.commend?s("div",{staticClass:"px-3 pb-2 pt-3 d-flex bb",staticStyle:{"border-bottom":"0.4rem solid rgb(235, 235, 235)"}},[s("div",{staticClass:"flex-1"},[t.commend.user?s("img",{staticClass:"w40 h40 b-radius-50",attrs:{src:t.commend.user.avatar?t.commend.user.avatar:t.defaultHeader}}):t._e()]),s("div",{staticClass:"w-90 pl-3"},[s("div",{staticClass:"h40 d-flex"},[s("div",{staticClass:"flex-1 h40 d-flex flex-coloum jc-center ai-start"},[s("span",{staticClass:"fs-m h-50 text-dark letter-s1"},[t._v(" "+t._s(t.commend.user.nickname)+" ")]),s("span",{staticClass:"fs-s h-50 text-dark-6"},[t._v(" "+t._s(t._f("formatDay")(t.commend.createdAt))+" ")])])]),s("div",{staticClass:"fs-m mt-2"},[s("p",{staticClass:"letter-s1"},[t._v(t._s(t.commend.content))]),s("div",{staticClass:"d-flex ai-center jc-start mt-1"},[s("span",{staticClass:"fs-s mr-3",class:t._f("IsFabulous")(t.commend.fabulous)},[s("i",{staticClass:"fs-m mr-1 iconfont icon-dianzan1",on:{click:function(e){return t.thumbsUp(t.commend["_id"],t.commend["index"],!1)}}}),t._v(" "+t._s(t.commend.fabulous.length>0?t.commend.fabulous.length:"")+" ")]),t._m(0)])])])]):t._e(),t.replys.length>0?s("MyLoadMore",{attrs:{loading:t.loading1,noMore:t.noMore1},on:{loadMore:function(e){return t.loadMore(!0)}}},[s("p",{staticClass:"pl-2 fs-m text-dark-6"},[t._v("相关回复共"+t._s(t.replys.length)+"条")]),t._l(t.replys,(function(e,a){return s("li",{key:a,staticClass:"px-3 pb-2 pt-3 d-flex bb",on:{click:function(s){return t.setReplyTo(e.user)}}},[s("div",{staticClass:"flex-1"},[e.user?s("img",{staticClass:"w40 h40 b-radius-50",attrs:{src:e.user.avatar?e.user.avatar:t.defaultHeader}}):t._e()]),s("div",{staticClass:"w-90 pl-3"},[s("div",{staticClass:"h40 d-flex"},[s("div",{staticClass:"flex-1 h40 d-flex flex-coloum jc-center ai-start"},[e.user?s("span",{staticClass:"fs-m h-50 text-dark letter-s1"},[t._v(t._s(e.user.nickname))]):t._e(),s("span",{staticClass:"fs-s h-50 text-dark-6"},[t._v(" "+t._s(t._f("formatDay")(e.createdAt))+" ")])])]),s("div",{staticClass:"fs-m mt-2"},[s("p",{staticClass:"letter-s1"},[e.reply?s("span",[t._v(" 回复 "),s("strong",{staticClass:"text-blue"},[t._v(t._s(e.reply.nickname)+":")])]):t._e(),t._v(" "+t._s(e.content)+" ")]),s("div",{staticClass:"d-flex ai-center jc-start mt-1"},[s("span",{staticClass:"fs-s mr-3",class:t._f("IsFabulous")(e.fabulous)},[s("i",{staticClass:"fs-m mr-1 iconfont icon-dianzan1",on:{click:function(s){return t.thumbsUp(e["_id"],a,!0)}}}),t._v(" "+t._s(e.fabulous.length>0?e.fabulous.length:"")+" ")]),s("span",[s("i",{staticClass:"iconfont icon-liaotian fs-m"})])])])])])}))],2):s("MyBlankPage"),s("div",{staticClass:"pop"})],1),s("div",{staticClass:"reply d-flex jc-start ai-center p-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"bg-grey-1 flex-1 h30 b-radius10 px-2",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),s("span",{staticClass:"fs-l letter-s1 text-center ml-2 w40",class:t.isValid?"text-blue":"text-tomato",on:{click:t.submitVideoCommend}},[t._v("回复")])])])],1)},Hs=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("i",{staticClass:"iconfont icon-liaotian fs-m"})])}],Rs=s("d6d3");s("fda2"),s("451f");var Vs={props:{id:{type:String,require:!0}},components:{videoPlayer:Rs["videoPlayer"]},watch:{active(){this.$refs.videoSwiper.swiper.slideTo(this.active)},async $route(t,e){"videoDetail"===t.name&&(this.video=await this.fetchVideo(),this.playerOptions.sources[0].src=this.video.url,this.playerOptions.poster=this.video.cover,this.init())},hideCommendDetail(){!0===this.hideCommendDetail&&(this.reply=null,this.placeholder="",this.page1=0,this.noMore1=!1)}},computed:{player(){return this.$refs.videoPlayer.player},isValid(){return""!==this.content},...Object(p["b"])(["getUserId"])},data(){return{playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!0,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""},{type:"video/ogg",src:""},{type:"video/webm",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},hideCommendDetail:!0,video:{},active:0,showInfo:!1,moreList:[],commends:[],collections:[],limit:20,page:0,loading:!1,noMore:!1,limit1:10,page1:0,loading1:!1,noMore1:!1,content:"",reply:null,placeholder:"",commend:null,replys:[]}},async created(){this.init()},methods:{async init(){this.video=await this.fetchVideo(),this.playerOptions.sources.forEach(t=>{t.src=this.video.url}),this.playerOptions.poster=this.video.cover,this.moreList=await this.fetchVideos(),this.video.reads=await this.setReads(`rest/videos/reads/${this.video["_id"]}`),await this.fetchCollectMessage(),this.commends=await this.fetchCommends()},async fetchVideo(){const t=await this.fetch(`rest/videos/${this.id}`,{populate:{path:"commends",select:"id"}});return t},async fetchVideos(){const t=await this.fetch("rest/videos",{limit:10,page:0,populate:{path:"commends",select:"id"},where:JSON.stringify({_id:{$ne:this.video._id}})});return t},async fetchCollectMessage(){this.video["_id"]&&this.getUserId&&(this.collections=await this.fetch("rest/video_collection",{where:{collect:this.video["_id"],user:this.getUserId},populate:{path:"collect"}}))},async fetchCommends(){if(this.id){const t=await this.fetch("rest/video_commend",{parent:this.id,where:{commend:null},populate:{path:"user childs fabulous",select:"nickname avatar user"},limit:this.limit,page:this.page});return t}},async collect(){this.video["_id"]&&(await this.setCollection(this.video["_id"],"video_collection"),await this.fetchCollectMessage())},onPlayerPlay(t){},onPlayerPause(t){},async loadMore(t){if(!0===t){if(this.noMore1)return;this.page1+=1,this.loading1=!0;const t=await this.fetchReplys();setTimeout(()=>{let e=t.length;if(e>0){for(let s=0;s<e;s++)this.replys.push(t[s]);this.loading1=!1}else this.loading1=!1,this.noMore1=!0},1500)}else{if(this.noMore)return;this.page+=1,this.loading=!0;const t=await this.fetchCommends();setTimeout(()=>{let e=t.length;if(e>0){for(let s=0;s<e;s++)this.commends.push(t[s]);this.loading=!1}else this.loading=!1,this.noMore=!0},1500)}},async submitVideoCommend(){if(!1===this.isValid)this.AlertError("评论不能为空");else if(this.getUserId&&this.content&&this.id&&this.commend&&this.reply){await this.post("rest/video_commend",{parent:this.id,user:this.getUserId,content:this.content,commend:this.commend["_id"],reply:this.reply["_id"]});this.content="",this.page1=0,this.noMore1=!1,this.replys=await this.fetchReplys()}else{await this.post("rest/video_commend",{parent:this.id,user:this.getUserId,content:this.content});this.content="",this.page=0,this.noMore=!1,this.commends=await this.fetchCommends()}},setReplyTo(t){this.reply=t,this.placeholder="@"+t.nickname},async replyCommend(t,e){this.hideCommendDetail=!1,this.commend=t,this.$set(this.commend,"index",e),this.setReplyTo(t.user),this.replys=await this.fetchReplys()},async fetchReplys(){let t=this.commend["_id"];if(t){const e=await this.fetch("rest/video_commend",{parent:this.id,limit:this.limit1,page:this.page1,where:{commend:t},populate:{path:"user childs fabulous reply",select:"avatar nickname user"}});return e}},async thumbsUp(t,e,s){if(t&&"number"===typeof e){await this.setFabulous(t,"video_fabulou");let a=await this.fetch(`rest/video_commend/${t}`,{populate:{path:"user fabulous"}});this.$set(!0===s?this.replys[e]:this.commends[e],"fabulous",a.fabulous)}}}},qs=Vs,Fs=(s("b532"),Object(n["a"])(qs,zs,Hs,!1,null,null,null)),Ws=Fs.exports,Ys=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"equip-page bg-grey-0"},[s("MyHeader",{attrs:{title:"装备",closeBack:""}}),s("ul",{staticClass:"main p-2 mt-2"},t._l(t.equips,(function(e){return s("li",{key:e["_id"],staticClass:"bg-white b-radius10 mb-3 p-2 letter-s1"},[s("div",{staticClass:"d-flex jc-between ai-center text-dark",on:{click:function(s){return t.routeByName("equipList",e["_id"])}}},[s("span",{staticClass:"fw"},[t._v(t._s(e.title))]),s("i",{staticClass:"iconfont icon-xiangyou fw text-dark-6"})]),e.childs.length>0?s("div",{staticClass:"d-flex flex-wrap jc-between pt-2 fs-m text-dark"},t._l(e.childs,(function(e){return s("span",{key:e["_id"],staticClass:"bg-grey-1 text-over items text-left mb-2 p-2",on:{click:function(s){return t.routeByName("equipList",e["_id"])}}},[t._v(" "+t._s(e.title)+" ")])})),0):t._e()])})),0)],1)},Js=[],Zs={data(){return{equips:[]}},created(){this.fetchEquip()},methods:{async fetchEquip(){this.equips=await this.fetch("rest/equip_type",{where:{parent:null},populate:{path:"childs"}})}}},Qs=Zs,Gs=(s("4168"),Object(n["a"])(Qs,Ys,Js,!1,null,null,null)),Ks=Gs.exports,Xs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.id?s("div",{staticClass:"equip-page"},[s("MyHeader",{attrs:{title:t.model.title?t.model.title:"装备收藏"}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!t.horizontal,expression:"!horizontal"}],staticClass:"fs-xxl iconfont icon-act_liebiaohengxiang\n",on:{click:function(e){t.horizontal=!t.horizontal}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.horizontal,expression:"horizontal"}],staticClass:"fs-xxl iconfont icon-act_liebiaozongxiang\n",on:{click:function(e){t.horizontal=!t.horizontal}}})]),t.flag?t._e():s("MySearch",{on:{inputSearch:t.searchProduct}}),s("div",{staticClass:"main p-2"},[t.products.length>0?s("MyLoadMore",{attrs:{flexWrap:t.horizontal,noMore:t.option.noMore,loading:t.option.loading},on:{loadMore:function(e){return t.loadMore(t.option,!0===t.flag?t.fetchCollections:t.fetchProducts,t.products)}}},t._l(t.products,(function(e){return s("li",{key:e["_id"],staticClass:"mb-2 d-flex",class:t.horizontal?"itemX flex-coloum":"itemY",on:{click:function(s){return t.routeByName("product",e["_id"])}}},[s("img",{staticClass:"cover",attrs:{src:e.cover?e.cover:t.default_img}}),s("div",{staticClass:"pb-1 d-flex flex-coloum",class:t.horizontal?"px-2 ":"box px-2  jc-around flex-1"},[s("p",{staticClass:"text-over fs-l fw"},[t._v(t._s(e.name))]),s("p",{staticClass:"fs-m text-over",class:t.horizontal?"text-orange":"text-blue",staticStyle:{"line-height":"1rem"}},[t._v(" "+t._s(e.recommend)+" ")]),s("p",{directives:[{name:"show",rawName:"v-show",value:!t.horizontal,expression:"!horizontal"}],staticClass:"fs-m"},[s("span",[t._v("规格：")]),t._v(t._s(e.specification)+" ")]),s("div",{staticClass:"d-flex jc-between"},[s("div",{staticClass:"text-tomato"},[s("span",{staticClass:"fs-m"},[t._v("￥")]),s("strong",[t._v(t._s(e.price))])]),t.flag?s("i",{staticClass:"iconfont icon-gengduo1 fs-xl text-dark",on:{click:function(s){return s.stopPropagation(),t.openRemoveBtn(e["remove_id"])}}}):t._e()])])])})),0):s("MyBlankPage"),s("mt-actionsheet",{attrs:{actions:t.options},model:{value:t.removeState,callback:function(e){t.removeState=e},expression:"removeState"}})],1)],1):t._e()},ta=[],ea={props:{id:{}},components:{MySearch:F},computed:{...Object(p["b"])(["getUserId"])},data(){return{flag:!1,horizontal:!0,search:"",model:{},products:[],option:{noMore:!1,loading:!1,limit:10,page:0},options:[{name:"移除收藏",method:this.removeCollect}],removeState:!1,removeTarget:null}},created(){this.id===this.getUserId?(this.flag=!0,this.initCollect()):(this.flag=!1,this.init())},methods:{async init(){this.option.page=0,await this.fetchEquip(),this.products=await this.fetchProducts()},async initCollect(){this.option.page=0,this.products=await this.fetchCollections()},async fetchEquip(){this.model=await this.fetch(`rest/equip_type/${this.id}`)},async fetchProducts(){let t=this.model["_id"];if(t){const e=await this.fetch("rest/products",{where:{parent:t},match:{key:"name",val:this.search},select:"-content",limit:this.option.limit,page:this.option.page});return e}},async fetchCollections(){const t=await this.fetch("rest/product_collection",{where:{user:this.id},populate:{path:"collect"},limit:this.option.limit,page:this.option.page});return 0===t.length?[]:t.map(t=>{const e=t.collect?t.collect:{_id:t["_id"],name:"装备已失效",price:0};return e.remove_id=t["_id"],e})},openRemoveBtn(t){this.removeTarget=t,this.removeState=!0},async removeCollect(){this.removeTarget&&this.getUserId&&(await this.$http.delete(`rest/product_collection/${this.removeTarget}`),await this.initCollect())},async searchProduct(t){this.search=t,this.products=await this.fetchProducts(),this.option.page=0}}},sa=ea,aa=(s("6581"),Object(n["a"])(sa,Xs,ta,!1,null,null,null)),ia=aa.exports,oa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product-page"},[s("MyHeader",{attrs:{title:"装备详情"}},[t.model?s("i",{staticClass:"iconfont icon-star fs-xl",class:t.collection.length>0?"text-orange":"text-white",on:{click:t.collect}}):t._e()]),s("img",{staticClass:"cover w-100 bb",attrs:{src:t.model.cover}}),s("div",{staticClass:"main"},[s("div",{staticClass:"info p-2 text-dark m1-1"},[s("p",t._l(t.model.parent,(function(e){return s("span",{key:e["_id"],staticClass:"fw letter-s1"},[t._v(t._s(e.title)+"/")])})),0),s("p",[s("strong",{staticClass:"text-dark letter-s1"},[t._v("装备名称：")]),s("span",{staticClass:"letter-s1 text-steel"},[t._v(t._s(t.model.name))])]),s("div",{staticClass:"d-flex jc-between"},[s("div",{staticClass:"flex-1"},[s("strong",{staticClass:"text-dark letter-s1"},[t._v("参考价格：")]),s("span",{staticClass:"text-tomato"},[t._v("￥"),s("strong",{staticClass:"fs-xl text-tomato"},[t._v(t._s(t.model.price))])])]),s("div",[s("strong",{staticClass:"text-dark letter-s1"},[t._v("规格：")]),s("span",{staticClass:"text-purple"},[t._v(t._s(t.model.specification))])])]),s("p",{staticClass:"text-orange"},[s("strong",{staticClass:"text-dark letter-s1"},[t._v("推荐理由：")]),t._v(t._s(t.model.recommend)+" ")])]),s("div",{staticClass:"detail px-2"},[t._m(0),s("p",{staticClass:"content",domProps:{innerHTML:t._s(t.model.content)}})])])],1)},na=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"fs-m text-dark py-1 d-flex ai-center jc-start"},[t._v(" 详细介绍 "),s("i",{staticClass:"iconfont icon-xiangyou fs-s"})])}],la={props:{id:{}},computed:{...Object(p["b"])(["getUserId"])},data(){return{model:{},collection:[]}},created(){this.id&&this.init()},methods:{async init(){await this.fetchProduct(),await this.fetchCollectMessage()},async fetchProduct(){this.model=await this.fetch(`rest/products/${this.id}`,{populate:{path:"parent"}})},async collect(){await this.setCollection(this.model["_id"],"product_collection"),await this.fetchCollectMessage()},async fetchCollectMessage(){this.model["_id"]&&this.getUserId&&(this.collection=await this.fetch("rest/product_collection",{where:{collect:this.model["_id"],user:this.getUserId}}))}}},ra=la,ca=(s("8c0c"),Object(n["a"])(ra,oa,na,!1,null,null,null)),da=ca.exports;a["default"].use(d["a"]);const ma=[{path:"/",redirect:"/main/article"},{path:"/main",name:"main",component:E,children:[{path:"article",name:"article",component:et},{path:"video",name:"video",component:Us},{path:"equip",name:"equip",component:Ks},{path:"forum",name:"forum",component:hs},{path:"personal",name:"personal",component:Zt}]},{path:"/main/article/detail/:id",name:"articleDetail",component:xt,props:!0},{path:"/main/article/detail/commend/:id",name:"ArtcleCommend",component:jt,props:!0},{path:"/main/article/type/:id",name:"ArticleType",component:At,props:!0},{path:"/main/player/:id",name:"player",component:Vt,props:!0},{path:"video/:id",name:"videoDetail",component:Ws,props:!0},{path:"/main/personal/avatar",name:"avatar",component:ee},{path:"/main/personal/info",name:"info",component:he},{path:"/main/personal/info/infoEdit",name:"infoEdit",component:xe},{path:"/main/personal/artCollect/:id",name:"artCollect",component:je,props:!0},{path:"/main/personal/myCommend/:id",name:"myCommend",component:Ae,props:!0},{path:"/main/personal/postCollect/:id",name:"postCollect",component:Ee,props:!0},{path:"/main/personal/postCommend/:id",name:"postCommend",component:Ve,props:!0},{path:"/main/personal/videoCollect/:id",name:"videoCollect",component:Ze,props:!0},{path:"/main/personal/info/resetPwd",name:"resetPwd",component:es},{path:"/main/personal/product/:id",name:"productCollect",component:ia,props:!0},{path:"/main/personal/callus",name:"callus",component:ls},{path:"/main/equip/list/:id",name:"equipList",component:ia,props:!0},{path:"/main/equip/product/:id",name:"product",component:da,props:!0},{path:"/main/forum/postCreate",name:"postCreate",component:ws},{path:"/main/forum/postEdit/:id",name:"postEdit",component:ws,props:!0},{path:"/main/forum/postDetail/:id",name:"postDetail",component:Ts,props:!0},{path:"/login",name:"login",component:x},{path:"/register",name:"register",component:j}],ua=new d["a"]({mode:"hash",base:"/",routes:ma});var ha=ua,fa=s("bc3a"),pa=s.n(fa);const va=pa.a.create({timeout:6e3,baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_URL||"/mobile/api"});va.interceptors.request.use(t=>{ja.state.preventClick=!0;const e=localStorage.getItem("m_token");return e&&(t.headers.Autorization="Bearer "+e),t},t=>Promise.reject(t)),va.interceptors.response.use(t=>(ja.state.preventClick=!1,t),t=>(t.response.data.message&&(ja.state.preventClick=!1,Object(h["Toast"])({message:t.response.data.message,iconClass:"iconfont icon-cuowu",duration:1e3})),401==t.response.status&&ha.push({name:"login"}),t.message.includes("timeout")&&(ja.state.preventClick=!1,Object(h["Toast"])({message:"请求超时，请稍后再试",iconClass:"iconfont icon-cuowu",duration:1e3})),Promise.reject(t)));var ga=va;const _a={getUserId(t){return t["local_userInfo"]=JSON.parse(window.localStorage.getItem("m_userInfo")),t["local_userInfo"].id}};var xa=_a;a["default"].use(p["a"]);const ba={stateOptions:{mask_state:!1},preventClick:!1,tabbarIndex:0,article:{category_index:0,catType_index:0},post:{commend_drawer_state:!1,select_commend_id:null},local_userInfo:null,userInfo:null},wa={setItem(t,e){window.localStorage.setItem(e.key,JSON.stringify(e.value))},removeItem(t,e){window.localStorage.removeItem(e)},switchMaskState(t){t.maskState=!t.maskState},async getUserInfo(t){const e=await ga.get(`/rest/user/${xa.getUserId(t)}`);t.userInfo=e.data}},Ca={},ya={},ka=new p["a"].Store({state:ba,getters:xa,mutations:wa,actions:Ca,modules:ya});var ja=ka,Ma=(s("aa35"),s("7212")),Ia=s.n(Ma),Pa=(s("dfa4"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bb pb-3 d-flex ai-center"},[s("div",{staticClass:"flex-1"},[s("span",{staticClass:"text-dark fs-l letter-s1"},[t._v(t._s(t.title))]),s("i",{staticClass:"iconfont icon-jiufuqianbaoicon11 text-orange fs-lxx"})]),s("i",{staticClass:"iconfont icon-gengduo_huaban fw",on:{click:function(e){return e.stopPropagation(),t.removeMethod(e)}}})])}),Sa=[],$a={props:{title:String},methods:{removeMethod(){this.$emit("removeMethod")}}},Aa=$a,Oa=Object(n["a"])(Aa,Pa,Sa,!1,null,null,null),Ta=Oa.exports,Ba=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"commend-header h40 py-1 px-2 d-flex ai-center bg-dark text-white",class:t.closeBack?"jc-center":"jc-between"},[s("div",[s("i",{directives:[{name:"show",rawName:"v-show",value:!t.closeBack,expression:"!closeBack"}],staticClass:"iconfont icon-fanhui fs-xxl",on:{click:t.routeBack}})]),s("span",{staticClass:"letter-s1 "},[t._v(t._s(t.title))]),s("div",{on:{click:t.clickRight}},[t._t("default")],2)])},Da=[],La={props:{closeBack:{type:Boolean},title:{type:String,require:!0}},methods:{clickRight(){this.$emit("clickRight")}}},Ea=La,Na=(s("5452"),Object(n["a"])(Ea,Ba,Da,!1,null,null,null)),Ua=Na.exports,za=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],class:t.flexWrap?"flex-wrap d-flex w-100 jc-between":"",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"true"}},[t._t("default")],2),s("div",[t.loading?s("div",{staticClass:"loading-box d-flex jc-center ai-center py-3"},[s("mt-spinner",{staticClass:"mr-3",attrs:{type:"snake"}}),s("span",{staticClass:"text-dark fw"},[t._v("加载中...")])],1):t._e(),t.noMore?s("div",{staticClass:"no-more d-flex jc-center ai-center py-3"},[s("span",{staticClass:"text-dark fw"},[t._v("已加载全部~")])]):t._e()])])},Ha=[],Ra={props:{loading:{type:Boolean,require:!0},noMore:{type:Boolean,require:!0},flexWrap:{type:Boolean,require:!0}},data(){return{}},methods:{async loadMore(){this.$emit("loadMore")}}},Va=Ra,qa=Object(n["a"])(Va,za,Ha,!1,null,null,null),Fa=qa.exports,Wa=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ya=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-coloum jc-between ai-center py-6 text-tomato"},[s("i",{staticClass:"iconfont icon-meiyoudingdan-01 fs-lxx \n"}),s("span",{staticClass:"fs-xxl mt-3"},[t._v(" 暂无内容 ")])])}],Ja={},Za=Ja,Qa=Object(n["a"])(Za,Wa,Ya,!1,null,null,null),Ga=Qa.exports,Ka=(s("be35"),s("6418"),s("3d39"),s("7f10"),s("c1df")),Xa=s.n(Ka),ti=s("c72b");Xa.a.locale("zh-cn");const ei={data(){return{defaultHeader:s("68dd"),default_img:s("ea5f")}},filters:{formatBirth(t){let e=Xa()(t).fromNow(),s=parseInt(e,10);return isNaN(s)&&(s="未知"),s},formatDM(t){let e=Xa()(t).format("hh:mm");return e},formatMD(t){if(t){let e=Xa()(t).format("MM-DD");return e}return""},formatMDcn(t){if(t){let e=Xa()(t).format("MMMDo");return e}return""},formatWK(t){let e=Xa()(t).day(),s=Number(e);return 0==s?"天":1==s?"一":2==s?"二":3==s?"三":4==s?"四":5==s?"五":"六"},formatDay(t){if(t){let e=Xa()(t).format("YYYY-MM-DD");return e}return""},formatDate(t){let e=Xa()(t).format("YYYY-MM-DD hh:mm");return e},formatYear(t){let e=Xa()(t).format("YYYY");return e},timeAgo(t){let e=new Date(t);return Object(ti["a"])(e,"zh_CN")},formatReads(t){if(void 0===t)return 0;{let e=t.toString().length,s=t.toString().split("");return 5===e?s[0]+"."+s[1]+"万":6===e?s[0]+s[1]+"."+s[2]+"万":7===e?s[0]+s[1]+s[2]+"."+s[3]+"万":8===e?s[0]+s[1]+s[2]+s[3]+"万":9===e?s[0]+"."+s[1]+"亿":t}},IsFabulous(t){let e=ja.getters.getUserId,s="text-grey";return t?(Object.keys(t).forEach(a=>{t[a]["user"]==e&&(s="text-tomato")}),s):s},shieldText(t){return`${t.substring(0,2)}******${t.substring(t.length-2)}`}},methods:{setAutoHeader(){return{Autorization:"Bearer "+localStorage.getItem("token")}},routeByName(t,e=null){t&&e?ha.push({name:t,params:{id:e}}):ha.push({name:t})},routeBack(){ha.back()},async fetch(t,e=null){if(t&&e){const s=await ga({method:"GET",url:t,params:e});return s.data}{const e=await ga({method:"GET",url:t});return e.data}},async post(t,e={}){const s=await this.$http.post(t,e);return s.data},async put(t,e={}){const s=await this.$http.put(t,e);return s.data},async loadMore(t,e,s=[],a=0,i=0){if(!t.noMore&&a===i){t.page+=1,t.loading=!0;const a=await e();setTimeout(()=>{let e=a.length;if(e>0){for(let t=0;t<e;t++)s.push(a[t]);t.loading=!1}else t.loading=!1,t.noMore=!0},1500)}},IndicatorOpen(t){h["Indicator"].open({text:t,spinnerType:"fading-circle"})},IndicatorClose(){h["Indicator"].close()},AlertSuccess(t="操作成功",e){Object(h["Toast"])({message:t,iconClass:e?"iconfont "+e:"iconfont icon-xiaoxi-chenggong",duration:1500})},AlertError(t="操作失败"){Object(h["Toast"])({message:t,iconClass:"iconfont icon-cuowu",duration:1500})},async setFabulous(t,e){const{id:s}=JSON.parse(localStorage.getItem("m_userInfo"));if(t&&s){const a={from:t,user:s};await this.post(`rest/${e}/fabulous`,a)}},async setCollection(t,e){if(t&&this.getUserId){const s=await this.post(`rest/${e}/collect`,{collect:t,user:this.getUserId});this.AlertSuccess(s.message)}},async setReads(t){const{reads:e}=await this.put(t);return e},removeActionSheet(t,e){e.state=!0,e.target=t}}};var si=ei;a["default"].prototype.$http=ga,a["default"].use(f.a),a["default"].use(Ia.a),a["default"].component("invalid-item",Ta),a["default"].component("MyHeader",Ua),a["default"].component("MyLoadMore",Fa),a["default"].component("MyBlankPage",Ga),a["default"].mixin(si),a["default"].config.productionTip=!1,new a["default"]({router:ha,store:ja,render:t=>t(c)}).$mount("#app")},5770:function(t,e,s){"use strict";var a=s("4303"),i=s.n(a);i.a},"5c1a":function(t,e,s){"use strict";var a=s("ca77"),i=s.n(a);i.a},"5f6c":function(t,e,s){},"60df":function(t,e,s){},6418:function(t,e,s){},6581:function(t,e,s){"use strict";var a=s("ad88"),i=s.n(a);i.a},"66c4":function(t,e,s){},"68dd":function(t,e,s){t.exports=s.p+"img/default_header.dc39fe34.png"},"6c5a":function(t,e,s){"use strict";var a=s("da0c"),i=s.n(a);i.a},"6c8f":function(t,e,s){"use strict";var a=s("60df"),i=s.n(a);i.a},7120:function(t,e,s){"use strict";var a=s("0061"),i=s.n(a);i.a},"7a94":function(t,e,s){},"7e01":function(t,e,s){"use strict";var a=s("161b"),i=s.n(a);i.a},8658:function(t,e,s){},8659:function(t,e,s){},"8c0c":function(t,e,s){"use strict";var a=s("8f72"),i=s.n(a);i.a},"8dd5":function(t,e,s){"use strict";var a=s("db56"),i=s.n(a);i.a},"8eff":function(t,e,s){"use strict";var a=s("eab2"),i=s.n(a);i.a},"8f72":function(t,e,s){},"905c":function(t,e,s){"use strict";var a=s("8658"),i=s.n(a);i.a},"99d3":function(t,e,s){"use strict";var a=s("f2f2"),i=s.n(a);i.a},"9b12":function(t,e,s){},a02b:function(t,e,s){"use strict";var a=s("2067"),i=s.n(a);i.a},a1d0:function(t,e,s){},aa00:function(t,e,s){"use strict";var a=s("0a86"),i=s.n(a);i.a},ad88:function(t,e,s){},ae5d:function(t,e,s){"use strict";var a=s("4caf"),i=s.n(a);i.a},aece:function(t,e,s){"use strict";var a=s("e650"),i=s.n(a);i.a},af35:function(t,e,s){},b532:function(t,e,s){"use strict";var a=s("5f6c"),i=s.n(a);i.a},be35:function(t,e,s){},ca77:function(t,e,s){},ce1b:function(t,e,s){"use strict";var a=s("288d"),i=s.n(a);i.a},d93d:function(t,e,s){"use strict";var a=s("eea9"),i=s.n(a);i.a},da0c:function(t,e,s){},db56:function(t,e,s){},e212:function(t,e,s){"use strict";var a=s("1c2f"),i=s.n(a);i.a},e650:function(t,e,s){},ea5f:function(t,e,s){t.exports=s.p+"img/default_null.e33803e9.png"},eab2:function(t,e,s){},ecee:function(t,e,s){"use strict";var a=s("54c1"),i=s.n(a);i.a},eea9:function(t,e,s){},ef91:function(t,e,s){"use strict";var a=s("7a94"),i=s.n(a);i.a},f2f2:function(t,e,s){},faaa:function(t,e,s){}});
//# sourceMappingURL=app.a387e5a0.js.map